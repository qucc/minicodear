 /**
 * Jeeliz Face Filter - https://github.com/jeeliz/jeelizFaceFilter
 *
 * Copyright 2020 WebAR.rocks ( https://webar.rocks )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

// BEGIN EMULATE DOM

// import some usefull stuffs
try {
  var Buffer = require('buffer').Buffer;
} catch(err) {
  console.log('Cannot import Buffer package');
}

// emulate global variables:
const navigator = {  
  platform: "Linux x86_64",
  userAgent: "forceWebGL1_noAntialiasing_noDOM"
};

const window = {
  canvas: null,
  innnerWidth: -1,
  innerHeight: -1,
  URL: {
    createObjectURL: function() {
      return null
    }
  },
  addEventListener: function() {},
  removeEventListener: function() {},
  requestAnimationFrame: function(step) {
    if (window.canvas === null){
      setTimeout(step, 1);
      return;
    }
    window.canvas.requestAnimationFrame(step)
  },
  cancelAnimationFrame: function(step) {
    if (window.canvas === null){
      return;
    }
    window.canvas.cancelAnimationFrame(step)
  },
  setCanvas: function(c) {
    window.canvas = c;
  }
};

const document = {
  createElement: function(elementType){
    switch(elementType){
      case 'canvas':
        return null; // return a real canvas
    }
  },
  getElementById: function(elementId){
    return null;
  },
  body: { appendChild: function(element){ return null; }}
};

if(typeof(wx) !== 'undefined'){ //WECHAT
  const systemInfo = wx.getSystemInfoSync()
  window.innnerWidth = systemInfo.windowWidth;
  window.innnerHeight = systemInfo.windowHeight;
}

const FAKEDOM = {
  window: window,
  document: document,
  navigator: navigator
};
// END EMULATE DOM


window.JEELIZFACEFILTERGEN=function(){function Fb(a){var c=null,d=null,f=null,k=0;this.o=function(n){this.Ff(n.mb);f.xe({nc:n.nc,kc:n.kc})};this.Te=function(n){return c[n]};this.Ff=function(n){var u=null;k=n.length;c=n.map(function(l,q){l=Object.assign({},l,{index:q,parent:this,sb:u,ef:q===k-1});return u=q=0===q?Gb.instance(l):Hb.instance(l)});d=c[0];f=c[k-1];c.forEach(function(l,q){0!==q&&l.vf()})};this.T=function(n){n.g(0);var u=n;c.forEach(function(l){u=l.T(u,!1)});return u};this.Se=function(){return d.F()};
this.Tb=function(){return f.Ve()};this.gd=function(){return f.gd()};this.m=function(){c&&(c.forEach(function(n){n.m()}),f=d=c=null,k=0)};"undefined"!==typeof a&&this.o(a)}function eb(a,c){var d=c%8;return a[(c-d)/8]>>7-d&1}function Ib(a){var c=JSON.parse(a);a=c.ne;var d=c.nf,f=c.n;var k="undefined"===typeof btoa?Buffer.from(c.data,"base64").toString("latin1"):atob(c.data);var n=k.length;c=new Uint8Array(n);for(var u=0;u<n;++u)c[u]=k.charCodeAt(u);k=new Float32Array(f);n=new Float32Array(d);u=a+d+
1;for(var l=0;l<f;++l){for(var q=u*l,r=0===eb(c,q)?1:-1,x=q+1,y=1,m=0,p=x+a-1;p>=x;--p)m+=y*eb(c,p),y*=2;x=m;q=q+1+a;y=n.length;m=0;for(p=q;p<q+y;++p)n[m]=eb(c,p,!0),++m;for(y=q=0;y<d;++y)q+=n[y]*Math.pow(2,-y-1);k[l]=0===q&&0===x?0:r*(1+q)*Math.pow(2,1+x-Math.pow(2,a-1))}return k}function Ya(){return-1!==[ia.ready,ia.play,ia.pause].indexOf(na)}function fb(){if(na===ia.play)return!1;na=ia.play;Ma.stop();rb(0)}function sb(){if(na!==ia.play)return!1;qa.stop();Ma.stop();na=ia.pause;return!0}function Ea(a,
c,d,f,k){a=4*(3*c+a)+d;return f+(U.buffer[a]/255+U.buffer[a+12]/65025)*(k-f)}function gb(){b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);va.da();T.reset();X.reset();C.P();C.Wc();b.disable(b.DEPTH_TEST);b.disable(b.BLEND);T.ua();C.Ba()}function Jb(){var a=da.na();va.O();b.viewport(0,0,3,2*a);C.set("s53");U.sa.g(0);T.l(!1,!1);return aa.ub(0,0,3,2*a,U.buffer,tb)}function rb(){na!==ia.pause&&(ba.isCleanGLStateAtEachIteration&&(C.Wc(),T.reset(),T.ua(),b.disable(b.DEPTH_TEST),b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,
!1),C.Ba()),qa.oc(Kb,Jb,Lb,tb,Mb,ba.animateProcessOrder))}function Kb(){va.da();if(!G.hb)if(G.gb)G.element.needsUpdate&&(G.M.Bb(G.element.arrayBuffer),G.element.needsUpdate=!1);else{var a=G.element.currentTime,c=a-G.tb;0>c&&(G.tb=a,c=0);1E3*c<ea.Xf||(G.tb+=c,G.M.refresh())}a=qa.Ue();da.update(a,Fa);for(c=0;c<a;++c){da.zb(c);C.set("s55");var d=Fa[da.hd()];C.G("u43",1+Na.pc*(Math.cos(d.ry)-1));P.va&&C.G("u42",d.rz);da.Xd("u41");Z.Na.$();G.M.g(0);U.sa.g(1);T.l(!1,!1);Oa.T(Z.Na)}qa.zb()}function tb(){va.Uf();
ba.isCleanGLStateAtEachIteration&&(va.reset(),X.reset(),b.enable(b.DEPTH_TEST));P.Eb&&P.Eb(da.yd()?Fa:Fa[0]);ba.isCleanGLStateAtEachIteration&&(b.disable(b.BLEND),T.reset(),T.ua())}function Lb(){for(var a=0;a<da.na();++a)if(da.jf(a)){var c=a,d=Sa[c],f=[c],k=Fa[c],n=hb[c],u=2*c;d.Va=Ea(1,u,3,0,1);k.detected=wa.X(k.detected,d.Va,ea.ge);d.x=Ea(0,u,1,-1,1);d.y=Ea(0,u,2,-1,1);d.ja=Ea(0,u,3,0,1);if(d.Va<ba.multiDetectionThresholdFactors[0]*ba.threshold)d.pa=Math.floor(d.pa/2),P.va&&(k.rz=0,k.ry=0);else{var l=
U.Pa;d.rx=Ea(1,u,0,-l[0],l[0]);d.ry=Ea(1,u,1,-l[1],l[1]);d.Qa=Ea(1,u,2,-l[2],l[2]);for(l=0;l<U.Y;++l)d.cd[l]=U.La[l](Ea(2,u,l,0,1));u=d.ja*U.Nd;f.dx=d.x-k.xRaw;f.dy=d.y-k.yRaw;f.Nb=u-k.sRaw;f.Kb=d.rx-k.rx;f.Lb=d.ry-k.ry;f.Mb=P.va?d.Qa:d.Qa-k.rz;l=qa.Ne();f=(1-Za.nb(ra.translationFactorRange[0],ra.translationFactorRange[1],Math.sqrt(f.dx*f.dx+f.dy*f.dy+f.Nb*f.Nb)/l))*(1-Za.nb(ra.rotationFactorRange[0],ra.rotationFactorRange[1],Math.sqrt(f.Kb*f.Kb+f.Lb*f.Lb+f.Mb*f.Mb)/l))*Za.nb(ra.qualityFactorRange[0],
ra.qualityFactorRange[1],d.Va);c=n[++ib[c]%n.length]=f;for(l=0;l<n.length;++l)c=Math.min(c,n[l]);c=Math.max(.5,c);f=Math.min(c,f);n=wa.X(ra.alphaRange[1],ra.alphaRange[0],Math.pow(f,ea.ie));k.xRaw=wa.X(k.xRaw,d.x,n);k.yRaw=wa.X(k.yRaw,d.y,n);k.sRaw=wa.X(k.sRaw,u,n);k.rx=wa.X(k.rx,d.rx,n);k.ry=wa.X(k.ry,d.ry,n);k.rz=P.va?k.rz+ra.followZRotAlphaFactor*n*d.Qa:wa.X(k.rz,d.Qa,n);c=k.sRaw*Na.Jb*Math.sin(k.ry);u=Math.sin(k.rz)*c/Pa;k.x=k.xRaw+Math.cos(k.rz)*c;k.y=k.yRaw+u;k.s=k.sRaw;n=Math.max(n,ea.he);
for(c=0;c<U.Y;++c)k.expressions[c]=wa.X(k.expressions[c],d.cd[c],n);++d.pa}}}function Mb(){na===ia.play&&Ma.oc(rb)}function ub(){Z.Na=X.instance({isPot:!0,isFloat:!1,width:Oa.Se()});var a={width:ea.Ud,height:da.na(),isFloat:!0,isPot:!1,array:da.De(new Float32Array([0,.5,.5,0,0,0,0,0,0,0,0,0]))};U.sa=Nb.instance(a)}function jb(){C.S("s55",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u39",value:1},{type:"2f",name:"u40",value:Z.D},{type:"1f",name:"u41",value:.5},{type:"1f",name:"u42",value:0}]);C.S("s56",
[{type:"1i",name:"u44",value:0},{type:"1i",name:"u39",value:1},{type:"1f",name:"u47",value:ea.Sf},{type:"1f",name:"u48",value:ba.threshold},{type:"3f",name:"u46",value:[U.N[0]*Z.D[0],U.N[1]*Z.D[1],U.N[2]]},{type:"1f",name:"u41",value:.5},{type:"1f",name:"u49",value:1},{type:"1f",name:"u42",value:0}]);var a=[{type:"1i",name:"u44",value:0}];C.S("s57",a);C.S("s58",a);C.S("s53",[{type:"1i",name:"u39",value:0},{type:"1f",name:"u52",value:Z.D[0]},{type:"2f",name:"u51",value:[0,.5/da.na()]}])}function kb(){Z.D[0]=
1;Z.D[1]=Z.C/Z.K;vb.o({rb:ba.overlapFactors,Ed:ba.nScaleLevels,C:Z.C,K:Z.K,Md:ba.scale0Factor,N:U.N,Od:ba.scanCenterFirst})}function Ob(a){if(P.Ea)wb("string"===typeof P.Ea?JSON.parse(P.Ea):P.Ea,a);else{var c=P.Gc;"JSON"!==c.toUpperCase().split(".").pop()&&(c+=ea.neuralNetworkPath);$a.get(c,function(d){d=JSON.parse(d);wb(d,a)})}}function wb(a,c){if(a.exportData){var d=a.exportData;d.rotationEulerAnglesFactors&&(U.Pa=d.rotationEulerAnglesFactors);if(d.translationScalingFactors){var f=d.translationScalingFactors,
k=ba.translationScalingFactors;U.N[0]=f[0]*k[0];U.N[1]=f[1]*k[1];U.N[2]=f[2]*k[2]}"undefined"!==typeof d.nExpressions&&(U.Y=d.nExpressions);U.Nd=d.dsMean?1+d.dsMean:1;Na.pc=.4;Na.Jb=.7;"undefined"!==typeof d.fgScaleXFactor&&(Na.pc=d.fgScaleXFactor);"undefined"!==typeof d.fgDisplaceXFactor&&(Na.Jb=d.fgDisplaceXFactor)}U.Y||(U.Y=ea.Dd);if(!U.La)for(U.La=[],d=0;d<U.Y;++d)U.La.push(ea.He);c(a)}function Pb(){if(Qa.o({Ua:P.ea,width:Z.C,height:Z.K,debug:!1,jc:function(){Ha("GLCONTEXT_LOST")},antialias:P.antialias,
premultipliedAlpha:!0}))return!0;Ha("GL_INCOMPATIBLE");return!1}function Qb(){var a=da.hd(),c=Fa[a];U.sa.Df(1);b.viewport(0,a,1,1);C.set("s56");P.va&&C.G("u42",c.rz);da.Xd("u41");var d=1,f=da.Nf(Sa,Z.C/Z.K);da.yd()&&(f&&(d=0,Sa[a].pa=0,c.isDetected=!1,c.detected=0),C.G("u49",d));C.Jf("u45",vb.get(a));T.l(!1,!1);if(da.xd()||f)b.viewport(1,a,1,1),C.set("s57"),C.G("u49",d),T.l(!1,!1);da.xd()&&(b.viewport(2,a,1,1),C.set("s58"),T.l(!1,!1));U.sa.sync()}function xb(){G.M&&G.M.remove();G.gb=G.element.isFakeVideo?
!0:!1;if(G.gb){var a=yb();a={isFlipY:!1,array:G.element.arrayBuffer,width:a.w,height:a.xa,isKeepArray:!0}}else a={H:G.element};G.tc=X.instance(Object.assign({isPot:!1,isLinear:!0,isFloat:!1},a));G.M=G.tc}function Ia(){var a=[{type:"mat2",name:"u38",value:G.v}];C.S("s54",[{type:"1i",name:"u1",value:0}].concat(a));C.S("s55",a)}function Ja(){var a=[.5,.5],c=G.D[1]/G.D[0];Pa=Qa.U()/Qa.F();90===Math.abs(pa.rotate)&&(c=1/c);c>Pa?a[1]*=Pa/c:a[0]*=c/Pa;C.S("s56",[{name:"u50",type:"1f",value:Pa}]);G.v[0]=
0;G.v[1]=0;G.v[2]=0;G.v[3]=0;switch(pa.rotate){case 0:G.v[0]=a[0];G.v[3]=a[1];break;case 180:G.v[0]=-a[0];G.v[3]=-a[1];break;case 90:G.v[1]=a[0];G.v[2]=-a[1];break;case -90:G.v[1]=-a[0],G.v[2]=a[1]}pa.flipX&&(G.v[0]*=-1,G.v[2]*=-1);G.hb||(G.v[1]*=-1,G.v[3]*=-1)}function yb(){var a={w:G.element.videoWidth||G.element.width,xa:G.element.videoHeight||G.element.height};if(!a.w||!a.xa||4>a.w||4>a.xa)throw Error("INVALID VIDEO DIMENSIONS - width = "+a.w+" height = "+a.xa);return a}function lb(){var a=yb(),
c=G.D[0]!==a.w||G.D[1]!==a.xa;c&&(G.D[0]=a.w,G.D[1]=a.xa);return c}function ab(a,c){if(na===ia.error)return!1;G.element=a;lb();c&&c();return!0}function zb(a,c,d){a&&a();G.Ja={video:{facingMode:{exact:pa.facingMode},width:{min:pa.minWidth,max:pa.maxWidth,ideal:pa.idealWidth},height:{min:pa.minHeight,max:pa.maxHeight,ideal:pa.idealHeight}},audio:!1};V.Ic(G.Ja,pa.deviceId);V.get(G.element?G.element:V.ld(),function(f){c&&c(f);d(f)},function(){Ha("WEBCAM_UNAVAILABLE")},G.Ja)}function Ha(a){na!==ia.error&&
(na=ia.error,P.Ia&&P.Ia(a))}var wa={Wg:function(a){return Math.ceil(Math.log2(a))},rh:function(a){return Math.log2(a)},nh:function(a){return 0===Math.log2(a)%1},hg:function(a){var c=[0,0,0,0];a.forEach(function(d){c[0]+=d[0];c[1]+=d[1];c[2]+=d[2];c[3]+=d[3]});return c},ig:function(a,c,d){return Math.min(Math.max(a,c),d)},lg:function(a){return a*Math.PI/180},xh:function(a,c){c=Math.pow(10,c);return Math.round(a*c)/c},yh:function(a){return Math.round(1E6*a)/1E6},Xg:function(a,c){return(100*a/c).toFixed(3)},
X:function(a,c,d){return a*(1-d)+c*d},sh:function(a,c){return a[0]*(1-c)+a[1]*c},Be:function(a,c){return wa.ue(a-c)},ue:function(a){for(;a>Math.PI;)a-=2*Math.PI;for(;a<=-Math.PI;)a+=2*Math.PI;return a},qg:function(a,c){return Math.abs(wa.Be(a,c))},Yf:function(a,c){return Math.atan2(Math.sin(a)+Math.sin(c),Math.cos(a)+Math.cos(c))}},$a={get:function(a,c,d){var f=new XMLHttpRequest;f.open("GET",a,!0);f.withCredentials=!1;f.onreadystatechange=function(){4===f.readyState&&(200===f.status||0===f.status?
c(f.responseText):"undefined"!==typeof d&&d(f.status))};f.send()},We:function(a){return new Promise(function(c,d){$a.get(a,c,d)})},Tg:function(a,c,d){a+=d?"?"+$a.Fe(d):"";$a.get(a,function(f){c(JSON.parse(f))})},uh:function(a,c,d){var f=new XMLHttpRequest;f.open("POST",a,!0);f.setRequestHeader("Content-type","application/x-www-form-urlencoded");f.onreadystatechange=function(){4!==f.readyState||200!==f.status&&0!==f.status||d(f.responseText)};f.send(c)},Fe:function(a){return"string"===typeof a?a:Object.keys(a).map(function(c){return encodeURIComponent(c)+
"="+encodeURIComponent(a[c])}).join("&")},Hg:function(a,c){var d=new XMLHttpRequest;d.open("POST",a,!0);d.responseType="arraybuffer";d.onload=function(){c(d.response)};d.send()}},Rb={create:function(a,c){for(var d=Array(c),f=0;f<c;++f)d[f]=a;return d},mg:function(a,c){for(var d=0;d<a.length;++d)c[d]=a[d]},clone:function(a){for(var c=Array(a.length),d=0;d<a.length;++d)c[d]=a[d];return c},Bh:function(a,c,d){a.forEach(function(f,k){c[k]=f*d})},Kh:function(a){for(var c=a.length-1;0<c;--c){var d=Math.floor(Math.random()*
(c+1)),f=a[c];a[c]=a[d];a[d]=f}},Mh:function(a){return a.sort(function(c,d){return c-d})},Rf:function(a){return Array.isArray(a)||a.constructor===Float32Array||a.constructor===Uint8Array}},mb={Hb:function(a,c){if(0===c||"object"!==typeof a)return a;a=Object.assign({},a);c=void 0===c||-1===c?-1:c-1;for(var d in a)a[d]=mb.Hb(a[d],c);return a},pg:function(a){return JSON.parse(JSON.stringify(a))}},Za={Lh:function(a,c,d){a=Math.min(Math.max((d-a)/(c-a),0),1);return a*a*(3-2*a)},nb:function(a,c,d){return Math.min(Math.max((d-
a)/(c-a),0),1)},Bg:function(a,c,d,f){return Math.pow(Math.min(Math.max((f-a)/(c-a),0),1),d)},Qh:function(){return 0},th:function(){return 1},qh:function(a){return a},yg:function(a){return a*a},Dg:function(a){return a*(2-a)},vg:function(a){return.5>a?2*a*a:-1+(4-2*a)*a},tg:function(a){return a*a*a},Cg:function(a){return--a*a*a+1},ug:function(a){return.5>a?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1},zg:function(a){return a*a*a*a},Eg:function(a){return 1- --a*a*a*a},wg:function(a){return.5>a?8*a*a*a*a:1-8*--a*
a*a*a},Ag:function(a){return a*a*a*a*a},Fg:function(a){return 1+--a*a*a*a*a},xg:function(a){return.5>a?16*a*a*a*a*a:1+16*--a*a*a*a*a}},Sb={Je:function(a,c,d){switch(a){case "relu":return d+"=max(vec4(0.,0.,0.,0.),"+c+");";case "elu":return d+"=mix(exp(-abs("+c+"))-vec4(1.,1.,1.,1.),"+c+",step(0.,"+c+"));";case "elu01":return d+"=mix(0.1*exp(-abs("+c+"))-vec4(0.1,0.1,0.1,0.1),"+c+",step(0.,"+c+"));";case "arctan":return d+"=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";
default:return!1}}},C=function(){function a(v,g,B){g=v.createShader(g);v.shaderSource(g,B);v.compileShader(g);return v.getShaderParameter(g,v.COMPILE_STATUS)?g:!1}function c(v,g,B){g=a(v,v.VERTEX_SHADER,g);B=a(v,v.FRAGMENT_SHADER,B);v===b&&l.push(g,B);var J=v.createProgram();v.attachShader(J,g);v.attachShader(J,B);v.linkProgram(J);return J}function d(v){return["float","sampler2D","int"].map(function(g){return"precision "+v+" "+g+";\n"}).join("")}function f(v,g){g.B=g.B?!0:!1;if(!g.B){g.ta=g.ta||"precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}";
g.Ta=g.Ta||["a0"];g.Ga=g.Ga||[2];g.precision=g.precision||m;g.id=x++;void 0!==g.Qd&&(g.Qd.forEach(function(h,D){g.h=g.h.replace(h,g.vb[D])}),g.Qd.splice(0));g.Bc=0;g.Ga.forEach(function(h){g.Bc+=4*h});var B=d(g.precision);g.qa=c(v,B+g.ta,B+g.h);g.A={};g.i.forEach(function(h){g.A[h]=v.getUniformLocation(g.qa,h)});g.attributes={};g.Ha=[];g.Ta.forEach(function(h){var D=v.getAttribLocation(g.qa,h);g.attributes[h]=D;g.Ha.push(D)});if(g.j){v.useProgram(g.qa);r=g;q=g.id;for(var J in g.j)v.uniform1i(g.A[J],
g.j[J])}g.oa=!0}}function k(v){xa.If(N);q!==v.id&&(N.P(),q=v.id,r=v,b.useProgram(v.qa),v.Ha.forEach(function(g){0!==g&&b.enableVertexAttribArray(g)}))}function n(v,g,B){f(v,g,B);v.useProgram(g.qa);v.enableVertexAttribArray(0);q=-1;return r=g}function u(){return{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],j:{u1:0}}}var l=[],q=-1,r=null,x=0,y=!1,m="highp",p=["u1"],A=["u0"],w={u1:0},e={u0:0},F={u1:0,u2:1},K={u3:0},H={s0:u(),s1:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
i:p,j:w,precision:"lowp"},s2:{h:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",i:["u1","u2"],j:F},s3:{h:"uniform sampler2D u1;uniform vec2 u4,u5;varying vec2 vv0;void main(){vec2 a=vv0*u4+u5;gl_FragColor=texture2D(u1,a);}",i:["u1","u4","u5"],j:w,B:!0},s4:{h:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",i:p,j:w},s5:{h:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",
i:["u1","u2"],j:F},s6:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",i:p,j:w},s7:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",i:p,j:w},s8:{h:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u4;}",i:["u0","u4"],j:e},s9:{h:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;const vec4 f=vec4(.25,.25,.25,.25),g=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u4,f);gl_FragColor=b*g;}",
i:["u0","u4"],j:e},s10:{h:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",i:p,j:w},s11:{h:"uniform sampler2D u1,u6;uniform float u7;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u6,vv0);gl_FragColor=mix(b,a,u7*f);}",i:["u1","u6","u7"],j:{u1:0,u6:1}},s12:{h:"uniform sampler2D u1;uniform vec2 u8;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u8)+texture2D(u1,vv0+u8*vec2(1.,-1.))+texture2D(u1,vv0+u8*vec2(-1.,-1.))+texture2D(u1,vv0+u8*vec2(-1.,1.)));}",
i:["u1","u8"],j:w},s13:{h:"uniform sampler2D u1;uniform vec4 u9;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u9);gl_FragColor=j(a);}",
i:["u1","u9"],j:w},s14:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",i:A,j:e,B:!0},s15:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",i:A,j:e},s16:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",i:A,j:e},
s17:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",i:A,j:e},s18:{h:"uniform sampler2D u0,u7,u10;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u7,vv0),d=texture2D(u10,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",i:["u0","u7","u10"],j:{u0:0,u7:1,u10:2},B:!0},s19:{h:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",
i:A,j:e},s20:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=log(f+a);gl_FragColor=b;}",i:A,j:e,B:!0},s21:{h:"uniform sampler2D u0,u11;uniform float u12;const vec2 e=vec2(.5,.5);const float f=1e-5;const vec4 g=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u11,e);float b=u12*u12;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",i:["u0","u11","u12"],j:{u0:0,u11:1},B:!0},s22:{h:"uniform sampler2D u1;uniform vec2 u13;varying vec2 vv0;void main(){float a=u13.x*u13.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u13.y),f=floor(u13.x*fract(b*u13.y)),g=(f*u13.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",
i:["u1","u13"],j:w},s23:{h:"uniform sampler2D u14,u15,u16;varying vec2 vv0;void main(){vec4 a=texture2D(u16,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u14,b),f=texture2D(u15,c);gl_FragColor=d*f;}",i:["u14","u15","u16"],j:{u15:0,u14:1,u16:2},B:!0},s24:{h:"uniform float u17;uniform sampler2D u14,u15;varying vec2 vv0;void main(){vec2 a=fract(vv0*u17);vec4 b=texture2D(u14,vv0),c=texture2D(u15,a);gl_FragColor=b*c;}",i:["u15","u14","u17"],j:{u15:0,u14:1}},s25:{h:"uniform float u17;uniform sampler2D u14,u15,u18,u19,u20,u21;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 h=vv0*u17,l=floor(h),c=h-l;vec4 m=texture2D(u14,vv0),d=texture2D(u15,c),a=texture2D(u21,vv0);a=a*255.;vec4 n=texture2D(u18,c),o=texture2D(u19,c),p=texture2D(u20,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b;d=i*d+j*n+k*o+q*p,gl_FragColor=m*d;}",
i:"u14 u15 u17 u21 u18 u19 u20".split(" "),j:{u15:0,u14:1,u21:3,u18:4,u19:5,u20:6},B:!0},s26:{h:"uniform sampler2D u14,u15,u22;uniform float u17,u23,u24,u25;varying vec2 vv0;const vec2 j=vec2(1.,1.);void main(){vec2 a=floor(u23*vv0),b=u23*vv0-a;float c=u17/u23;vec2 d=floor(b*c),f=b*c-d,g=(a+f)/u23;float k=u23*u25/u17;vec2 l=k*d,h=(l+f*u24)/u25,i=step(h,j);vec4 m=texture2D(u14,g),n=texture2D(u15,h),o=m*n*i.x*i.y,p=texture2D(u22,g);gl_FragColor=o*u24*u24+p;}",i:"u14 u15 u17 u23 u24 u25 u22".split(" "),
j:{u15:0,u14:1,u22:2}},s27:{h:"uniform sampler2D u14,u15;varying vec2 vv0;void main(){vec4 a=texture2D(u14,vv0),b=texture2D(u15,vv0);gl_FragColor=a*b;}",i:["u14","u15"],j:{u15:0,u14:1},B:!0},s28:{h:"uniform sampler2D u1,u22;uniform float u26;varying vec2 vv0;void main(){gl_FragColor=texture2D(u22,vv0)+u26*texture2D(u1,vv0);}",i:["u1","u22","u26"],j:{u1:0,u22:1}},s29:{h:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
i:p,j:w,precision:"lowp"},s30:{h:"varying vec2 vv0;uniform sampler2D u1;uniform float u27;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u27)).rgb,c=texture2D(u1,vv0+vec2(u27,u27)).rgb,d=texture2D(u1,vv0+vec2(u27,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",i:["u1","u27"],j:w,precision:"lowp"},s31:{h:"varying vec2 vv0;uniform sampler2D u1;uniform float u27;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u27)).rgb,c=texture2D(u1,vv0+vec2(u27,u27)).rgb,d=texture2D(u1,vv0+vec2(u27,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
i:["u1","u27"],j:w,precision:"lowp"},s32:{h:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u28))*2.,b-=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,b+=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u28))*2.,b+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
i:["u1","u2","u28"],j:F,B:!0},s33:{h:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u28,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",i:["u1","u2","u28"],j:F,B:!0},s34:{h:"uniform sampler2D u3;uniform vec2 u8;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u8*g;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u8*h),d=texture2D(u3,a+u8*i),j=texture2D(u3,a+u8),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
i:["u3","u8"],j:K},s35:{h:"uniform sampler2D u3;uniform vec2 u8;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u8*k),d=texture2D(u3,a+u8*l),g=texture2D(u3,a+u8),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u8*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u8*m),d=f(a+u8*2.),g=f(a+u8*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",i:["u3","u8"],j:K,B:!0},
s36:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",i:["u1"],j:w,precision:"lowp",B:!0},s37:{h:"uniform sampler2D u1;uniform vec2 u8;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u8)+2002./e*texture2D(u1,vv0-2.*u8)+3003./e*texture2D(u1,vv0-u8)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u8)+2002./e*texture2D(u1,vv0+2.*u8)+1001./e*texture2D(u1,vv0+3.*u8);gl_FragColor=a;}",i:["u8","u1"],j:w,precision:"lowp",
B:!0},s38:{h:"uniform sampler2D u1,u11,u29;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u11,vv0),b=texture2D(u29,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",i:["u1","u11","u29"],j:{u1:0,u11:1,u29:2},B:!0}},O={s39:{h:"uniform float u17,u30;uniform sampler2D u14,u15,u22;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u22,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u17,xyTo=floor(vv0*u17+eps2);float weightSize=toSparsity*u17;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u30*(xyPatch-halfFromSparsity))/u17,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u14,uvWeight)*texture2D(u15,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:["u17","u14","u15","u22","u30"],vb:["1.1111","gl_FragColor\\*=2.2222;"]},s40:{h:"uniform float u17,u30,u25;uniform sampler2D u14,u15,u22;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u22,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u25,xyTo=floor(vv0*u17+eps2);float weightSize=fromSparsity*u25;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u17;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u30*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u25,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u14,uvWeight)*texture2D(u15,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:"u17 u25 u14 u15 u22 u30".split(" "),vb:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},t=null,L=null,N={kb:function(){return y},o:function(){if(!y){t=mb.Hb(H,2);L=mb.Hb(O,2);m="highp";b.getShaderPrecisionFormat&&(b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.MEDIUM_FLOAT),b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.LOW_FLOAT));for(var v in t)f(b,t[v],v);C.set("s0");b.enableVertexAttribArray(0);y=!0}},Kc:function(v){v.forEach(function(g){N.Jc(g)})},Jc:function(v){t[v.id]=v;f(b,v,v.id)},nd:function(v,
g,B){g||(g=v);t[g]=Object.create(L[v]);t[g].df=!0;L[v].vb&&L[v].vb.forEach(function(J,h){t[g].h=t[g].h.replace(new RegExp(J,"g"),B[h])});f(b,t[g],g)},set:function(v){var g=t[v];g.B&&(g.B=!1,f(b,g,v));k(g)},Ra:function(v){return n(v,u(),"s41")},rc:function(v){return n(v,{h:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:m},"s42")},Ge:function(v){return"undefined"===typeof t[v]?!1:t[v].oa},P:function(){-1!==q&&(q=-1,r.Ha.forEach(function(v){0!==v&&b.disableVertexAttribArray(v)}))},sc:function(){var v=
0;r.Ha.forEach(function(g,B){B=r.Ga[B];b.vertexAttribPointer(g,B,b.FLOAT,!1,r.Bc,v);v+=4*B})},Wc:function(){b.enableVertexAttribArray(0)},Ba:function(){N.wb(b)},wb:function(v){v.vertexAttribPointer(r.Ha[0],2,v.FLOAT,!1,8,0)},Eh:function(v,g){b.uniform1i(r.A[v],g)},G:function(v,g){b.uniform1f(r.A[v],g)},ra:function(v,g,B){b.uniform2f(r.A[v],g,B)},Fh:function(v,g){b.uniform2fv(r.A[v],g)},Jf:function(v,g){b.uniform3fv(r.A[v],g)},Gh:function(v,g,B,J){b.uniform3f(r.A[v],g,B,J)},Kf:function(v,g,B,J,h){b.uniform4f(r.A[v],
g,B,J,h)},Sd:function(v,g){b.uniform4fv(r.A[v],g)},Hh:function(v,g){b.uniformMatrix2fv(r.A[v],!1,g)},Ih:function(v,g){b.uniformMatrix3fv(r.A[v],!1,g)},Jh:function(v,g){b.uniformMatrix4fv(r.A[v],!1,g)},S:function(v,g){N.set(v);g.forEach(function(B){switch(B.type){case "4f":b.uniform4fv(r.A[B.name],B.value);break;case "3f":b.uniform3fv(r.A[B.name],B.value);break;case "2f":b.uniform2fv(r.A[B.name],B.value);break;case "1f":b.uniform1f(r.A[B.name],B.value);break;case "1i":b.uniform1i(r.A[B.name],B.value);
break;case "mat2":b.uniformMatrix2fv(r.A[B.name],!1,B.value);break;case "mat3":b.uniformMatrix3fv(r.A[B.name],!1,B.value);break;case "mat4":b.uniformMatrix4fv(r.A[B.name],!1,B.value)}})},Vg:function(){return"lowp"},m:function(){b.disableVertexAttribArray(0);N.P();for(var v in t){var g=t[v];g.oa&&(g.oa=!1,b.deleteProgram(g.qa));g.df&&delete t[v]}l.forEach(function(B){b.deleteShader(B)});l.splice(0);x=0;y=!1;r=null;q=-1}};return N}(),b=null,Qa=function(){function a(m){console.log("ERROR in ContextFF: ",
m);return!1}function c(m){function p(){Ba.m();aa.reset();w.getExtension("WEBGL_lose_context").loseContext()}if(navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1"))return!1;var A=document.createElement("canvas");A.setAttribute("width",5);A.setAttribute("height",5);var w=null;try{w=A.getContext("webgl2",m)}catch(e){return!1}if(!w)return!1;d(w);aa.Xc(w);m=aa.Ib(w);if(!m.fa&&!m.ha)return p(),!1;m=Ba.Nc(w,m);p();return m?!0:!1}function d(m){m.clearColor(0,0,0,0);m.disable(m.DEPTH_TEST);
m.disable(m.BLEND);m.disable(m.DITHER);m.disable(m.STENCIL_TEST);m.disable(m.CULL_FACE);m.GENERATE_MIPMAP_HINT&&m.hint(m.GENERATE_MIPMAP_HINT,m.FASTEST);m.disable(m.SAMPLE_ALPHA_TO_COVERAGE);m.disable(m.SAMPLE_COVERAGE);m.depthFunc(m.LEQUAL);m.clearDepth(1)}var f=null,k=null,n=null,u=null,l=!0,q=null,r=null,x=[],y={F:function(){return f.width},U:function(){return f.height},Mg:function(){return f},Kg:function(){return b},ia:function(){return l},flush:function(){b.flush()},Me:function(){q||(q=new Uint8Array(f.width*
f.height*4));b.readPixels(0,0,f.width,f.height,b.RGBA,b.UNSIGNED_BYTE,q);return q},Og:function(){return f.toDataURL("image/jpeg")},Pg:function(){va.O();k||(k=document.createElement("canvas"),n=k.getContext("2d"));k.width=f.width;k.height=f.height;for(var m=y.Me(),p=n.createImageData(k.width,k.height),A=k.width,w=k.height,e=p.data,F=0;F<w;++F)for(var K=w-F-1,H=0;H<A;++H){var O=4*(F*A+H),t=4*(K*A+H);e[O]=m[t];e[O+1]=m[t+1];e[O+2]=m[t+2];e[O+3]=m[t+3]}n.putImageData(p,0,0);return k.toDataURL("image/png")},
Ng:function(m){!k&&m&&(k=document.createElement("canvas"),n=k.getContext("2d"));var p=m?k:document.createElement("canvas");p.width=f.width;p.height=f.height;(m?n:p.getContext("2d")).drawImage(f,0,0);return p},o:function(m){m=Object.assign({ga:null,jc:null,Ua:null,Tc:null,width:512,height:512,premultipliedAlpha:!1,bf:!0,antialias:!1,debug:!1,og:!1},m);m.ga?(b=m.ga,f=m.ga.canvas):m.Tc&&!m.Ua?f=document.getElementById(m.Tc):m.Ua&&(f=m.Ua);f||(f=document.createElement("canvas"));f.width=m.width;f.height=
m.height;if(b)l=b instanceof WebGL2RenderingContext;else{l=!0;var p={antialias:m.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:m.premultipliedAlpha,stencil:!1,depth:m.bf};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&(p.antialias=!1);var A=c(p);!A&&p.antialias&&(p.antialias=!1,A=c(p));A&&(b=f.getContext("webgl2",p));b?l=!0:((b=f.getContext("webgl",p))||(b=f.getContext("experimental-webgl",p)),l=!1)}if(!b)return a("WebGL1 and 2 are not enabled");
(u=b.getExtension("WEBGL_lose_context"))&&m.jc&&(r=m.jc,f.addEventListener("webglcontextlost",r,!1));if(!aa.o())return a("Not enough GL capabilities");d(b);C.o();T.o();Ba.Nc(b,aa.Le());x.forEach(function(w){w(b)});x.splice(0);return!0},dg:function(){return new Promise(function(m){b?m(b):x.push(m)})},m:function(){b&&(aa.m(),C.m(),Ba.m());u&&r&&(f.removeEventListener("webglcontextlost",r,!1),u=r=null);b=q=n=k=f=null;x.splice(0)}};return y}(),xa=function(){function a(){null===c&&("undefined"!==typeof C?
c=C:"undefined"!==typeof JEShaders&&(c=JEShaders))}var c=null;return{reset:function(){c=null},If:function(d){c!==d&&(c&&c.P(),c=d)},kb:function(){return c.kb()},Ba:function(){return c.Ba()},wb:function(d){return c.wb(d)},sc:function(){return c.sc()},P:function(){return c.P()},set:function(d){a();return c.set(d)},Ra:function(d){a();return c.Ra(d)},rc:function(d){a();return c.rc(d)}}}(),Aa=function(){function a(h){b.bindTexture(b.TEXTURE_2D,h)}function c(h){v[0]=h;h=g[0];var D=h>>16&32768,I=h>>12&2047,
M=h>>23&255;return 103>M?D:142<M?D|31744|((255==M?0:1)&&h&8388607):113>M?(I|=2048,D|(I>>114-M)+(I>>113-M&1)):D=(D|M-112<<10|I>>1)+(I&1)}function d(h){var D=new Uint16Array(h.length);h.forEach(function(I,M){D[M]=c(I)});return D}function f(){if(null!==B.Wb)return B.Wb;var h=n(d([.5,.5,.5,.5]),!0);return null===h?!0:B.Wb=h}function k(){if(null!==B.Xb)return B.Xb;var h=n(new Uint8Array([127,127,127,127]),!1);return null===h?!0:B.Xb=h}function n(h,D){if(!xa.kb()||!w)return null;var I=null,M=Math.sqrt(h.length/
4);try{var Y=b.getError();if("FUCKING_BIG_ERROR"===Y)return!1;I=J.instance({isFloat:!1,R:D,array:h,width:M});Y=b.getError();if(Y!==b.NO_ERROR)return!1}catch(oa){return!1}la.O();b.viewport(0,0,M,M);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT);xa.set("s0");I.Lc(0);ma.l(!0,!0);h=4*M*M;D=new Uint8Array(h);b.readPixels(0,0,M,M,b.RGBA,b.UNSIGNED_BYTE,D);M=!0;for(Y=0;Y<h;++Y)M=M&&3>Math.abs(D[Y]-127);I.remove();la.da();return M}var u=0,l=null,q=0,r=null,x=null,y=null,m=null,p=null,A=null,w=!1,e=[],
F={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,H:null,Vb:null,cf:!1,R:!1,ma:null,pb:4,dc:0},K=!1,H=null,O=null,t=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],L=!1,N=!1,v=new Float32Array(1),g=new Int32Array(v.buffer),B={Wb:null,Xb:null},J={o:function(){w||(p=[b.RGBA,null,b.RGBA,b.RGBA],A=[b.RGBA,null,b.RGBA,b.RGBA],l=[b.TEXTURE0,b.TEXTURE1,b.TEXTURE2,b.TEXTURE3,b.TEXTURE4,
b.TEXTURE5,b.TEXTURE6,b.TEXTURE7],L="undefined"!==typeof JEContext,N="undefined"!==typeof aa,L&&JEContext.oh()&&l.push(b.TEXTURE8,b.TEXTURE9),r=[-1,-1,-1,-1,-1,-1,-1,-1],m=[b.UNSIGNED_BYTE,b.FLOAT,b.FLOAT],w=!0)},Ze:function(){if(!x){for(var h=new Float32Array(16384),D=0;16384>D;++D)h[D]=2*Math.random()-1;x={random:J.instance({isFloat:!0,isPot:!0,array:h,width:64}),$d:J.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}J.Wf()},eh:function(){return x.$d},Wf:function(){m[1]=aa.Rb(b)},
Gf:function(){A=p=[b.RGBA,b.RGBA,b.RGBA,b.RGBA]},Ld:function(h){C.set("s1");la.O();var D=h.F(),I=h.U();b.viewport(0,0,D,I);h.g(0);ma.l(!1,!1)},vh:function(h,D){J.Ld(h);b.readPixels(0,0,h.F(),h.U(),b.RGBA,b.UNSIGNED_BYTE,D)},wh:function(h,D){J.Ld(h);return aa.ub(0,0,h.F(),h.U(),D)},ed:function(h,D,I,M,Y,oa,sa){h.activeTexture(h.TEXTURE0);var Ca=h.createTexture();h.bindTexture(h.TEXTURE_2D,Ca);Y=Y instanceof Float32Array?Y:new Float32Array(Y);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE);
h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.NEAREST);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.NEAREST);h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,oa);h.texImage2D(h.TEXTURE_2D,0,h.RGBA,I,M,0,h.RGBA,h.FLOAT,Y);h.bindTexture(h.TEXTURE_2D,null);h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,!1);sa&&(la.da(),C.Ra(h));h.viewport(0,0,I,M);h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,D,0);h.bindTexture(h.TEXTURE_2D,
Ca);sa?ma.l(!0,!0):T.$a(h);h.deleteTexture(Ca);w&&(r[0]=-1,y=null,u=0)},Db:function(h){h!==u&&(b.activeTexture(l[h]),u=h)},instance:function(h){var D;function I(){Q=void 0!==z.H.videoWidth?z.H.videoWidth:z.H.width;S=void 0!==z.H.videoHeight?z.H.videoHeight:z.H.height}function M(E){var R=b.getError();if("FUCKING_BIG_ERROR"===R)return!1;b.texImage2D(b.TEXTURE_2D,0,ja,fa,ha,E);R=b.getError();R!==b.NO_ERROR&&fa!==b.RGBA&&(fa=b.RGBA,b.texImage2D(b.TEXTURE_2D,0,ja,fa,ha,E));return!0}function Y(){if(!Ab){a(ta);
za&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,za);z.isPot?(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,z.isMirrorX?b.MIRRORED_REPEAT:b.REPEAT),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,z.isMirrorY?b.MIRRORED_REPEAT:b.REPEAT)):(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE));z.isAnisotropicFiltering&&"undefined"!==typeof JESETTINGS&&b.texParameterf(b.TEXTURE_2D,JEContext.Qg().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.$f);b.texParameteri(b.TEXTURE_2D,
b.TEXTURE_MAG_FILTER,z.isLinear?b.LINEAR:b.NEAREST);z.isLinear?b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,z.isMipmap&&!Ka?b.NEAREST_MIPMAP_LINEAR:b.LINEAR):b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,z.isMipmap&&!Ka?b.NEAREST_MIPMAP_NEAREST:b.NEAREST);fa=p[z.pb-1];ja=A[z.pb-1];ha=m[nb];if(aa.ia()){var E=aa.Oe();fa===b.RGBA&&ha===b.FLOAT?z.isMipmap||z.isLinear?ja=Ba.Qe(b):aa.Oc()?E&&(ja=E):ja=b.RGBA16F||b.RGBA:fa===b.RGB&&ha===b.FLOAT&&E&&(ja=E,fa=b.RGBA)}if(z.R&&!z.isFloat||z.isFloat&&
z.isMipmap&&Ba.hf())ja=aa.Pe(),ha=aa.Rb(b);z.dc&&(bb=z.dc);z.isSrgb&&4===z.pb&&(fa=JEContext.bh());if(z.H)M(z.H);else if(z.url)M(Ga);else if(ua){E=ua;try{"FUCKING_BIG_ERROR"!==b.getError()&&(b.texImage2D(b.TEXTURE_2D,0,ja,Q,S,0,fa,ha,E),b.getError()!==b.NO_ERROR&&(b.texImage2D(b.TEXTURE_2D,0,ja,Q,S,0,fa,ha,null),b.getError()!==b.NO_ERROR&&b.texImage2D(b.TEXTURE_2D,0,b.RGBA,Q,S,0,b.RGBA,b.UNSIGNED_BYTE,null)))}catch(ec){b.texImage2D(b.TEXTURE_2D,0,ja,Q,S,0,fa,ha,null)}z.isKeepArray||(ua=null)}else E=
b.getError(),"FUCKING_BIG_ERROR"!==E&&(b.texImage2D(b.TEXTURE_2D,0,ja,Q,S,0,fa,ha,null),E=b.getError(),E!==b.NO_ERROR&&(fa=b.RGBA,z.R&&ha!==b.FLOAT&&(ha=b.FLOAT,b.texImage2D(b.TEXTURE_2D,0,ja,Q,S,0,fa,ha,null))));if(z.isMipmap)if(!Ka&&ca)ca.Qb(),cb=!0;else if(Ka){E=Math.log2(Math.min(Q,S));Ra=Array(1+E);Ra[0]=ta;for(var R=1;R<=E;++R){var ka=Math.pow(2,R),W=Q/ka;ka=S/ka;var La=b.createTexture();a(La);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,
b.NEAREST);b.texImage2D(b.TEXTURE_2D,0,ja,W,ka,0,fa,ha,null);a(null);Ra[R]=La}cb=!0}a(null);r[u]=-1;za&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);Ta=!0;z.ma&&ca&&(z.ma(ca),z.ma=null)}}function oa(){for(var E=Q*S,R=2*E,ka=3*E,W=0;W<E;++W)ya[0][W]=Ua[W],ya[1][W]=Ua[W+E],ya[2][W]=Ua[W+R],ya[3][W]=Ua[W+ka]}function sa(){var E=Q*S*4;Da=[new Uint8Array(E),new Uint8Array(E),new Uint8Array(E),new Uint8Array(E)];ya=[new Float32Array(Da[0].buffer),new Float32Array(Da[1].buffer),new Float32Array(Da[2].buffer),
new Float32Array(Da[3].buffer)];db=new Uint8Array(4*E);Ua=new Float32Array(db.buffer);Va=!0}function Ca(){D=new Uint8Array(Q*S*4);Bb=new Float32Array(D.buffer);ob=!0}var z=Object.assign({},F,h),Wa=q++;null===z.isFlipY&&(z.isFlipY=z.url||z.array?!0:!1);z.data&&(z.array="string"===typeof z.data?Ib(z.data):z.isFloat?new Float32Array(z.data):new Uint8Array(z.data),z.isFlipY=!1);var nb=0,Cb=z.H?!0:!1,Xa=null,pb=null,Db=!1;z.R=z.R||z.isFloat;z.R&&(nb=1);!z.cf&&z.isFloat&&N&&!aa.Oc()&&(z.isFloat=!1);z.isFloat&&
(nb=2);z.isAnisotropicFiltering&&L&&!JEContext.hh()&&(z.isAnisotropicFiltering=!1);var ta=z.Vb||b.createTexture(),Ga=null,ua=!1,Q=0,S=0,Ta=!1,Ab=!1,Va=!1,ya=null,Da=null,db=null,Ua=null,ja=null,fa=null,ha=null,za=z.isFlipY,Tb=(h=z.R&&z.isMipmap)&&Ba.pe(),Ka=h&&Tb?!0:!1,Ra=null,bb=-1,cb=!1;var ob=!1;var Bb=D=null;z.width&&(Q=z.width,S=z.height?z.height:Q);var ca={get:function(){return ta},F:function(){return Q},U:function(){return S},fh:function(){return z.url},ih:function(){return z.isFloat},kh:function(){return z.R},
lh:function(){return z.isLinear},Qb:function(){b.generateMipmap(b.TEXTURE_2D)},me:function(E,R){Ka?(E||(E=ca.jd()),J.Db(R),a(Ra[E]),r[R]=-1):ca.g(R)},jd:function(){-1===bb&&(bb=Math.log(Q)/Math.log(2));return bb},Ie:function(E){if(Ka){E||(E=ca.jd());C.set("s12");J.Db(0);for(var R=Q,ka=S,W=1;W<=E;++W)R/=2,ka/=2,C.ra("u8",.25/R,.25/ka),b.viewport(0,0,R,ka),a(Ra[W-1]),b.framebufferTexture2D(la.cb(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,Ra[W],0),ma.l(!1,1===W);r[0]=-1}else ca.Qb()},Dh:function(E){(Cb=!Rb.Rf(E))?
(ua=null,z.H=E,I()):ua=E},g:function(E){if(!Ta)return!1;J.Db(E);if(r[E]===Wa)return!1;a(ta);r[E]=Wa;return!0},Lc:function(E){b.activeTexture(l[E]);u=E;a(ta);r[E]=Wa},u:function(){y=ca;b.framebufferTexture2D(la.cb(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,ta,0)},$:function(){y=ca;b.viewport(0,0,Q,S);b.framebufferTexture2D(la.cb(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,ta,0)},zc:J.zc,resize:function(E,R){Q=E;S=R;Y()},clone:function(E){E=J.instance({width:Q,height:S,R:z.R,isFloat:z.isFloat,isLinear:z.isLinear,isMirrorY:z.isMirrorY,
isFlipY:E?!za:za,isPot:z.isPot});xa.set("s0");la.da();E.u();b.viewport(0,0,Q,S);ca.g(0);ma.l(!0,!0);return E},Lf:function(){b.viewport(0,0,Q,S)},remove:function(){b.deleteTexture(ta);Ab=!0;e.splice(e.indexOf(ca),1);ca=null},refresh:function(){ca.Lc(0);za&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);Cb?b.texImage2D(b.TEXTURE_2D,0,ja,fa,ha,z.H):b.texImage2D(b.TEXTURE_2D,0,ja,Q,S,0,fa,ha,ua);za&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},Kd:function(){Va||sa();b.readPixels(0,0,Q,4*S,b.RGBA,b.UNSIGNED_BYTE,
db);oa();return ya},yf:function(){Va||sa();return aa.ub(0,0,Q,4*S,db).then(function(){oa();return ya})},Af:function(){ob||Ca();b.readPixels(0,0,Q,S,b.RGBA,b.UNSIGNED_BYTE,D);return Bb},zf:function(){ob||Ca();return aa.ub(0,0,Q,S,D)},Uc:function(E){la.O();C.set("s13");ca.g(0);if(E)b.viewport(0,0,Q,S),C.Kf("u9",.25,.25,.25,.25),ma.l(!1,!0);else for(E=0;4>E;++E)b.viewport(0,S*E,Q,S),C.Sd("u9",t[E]),ma.l(!1,0===E)},Bb:function(E){var R=ha===m[0]&&!k();a(ta);za&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);
R?(Db||(Xa=document.createElement("canvas"),Xa.width=Q,Xa.height=S,pb=Xa.getContext("2d"),pb.createImageData(Q,S),Db=!0),null.data.set(E),pb.putImageData(null,0,0),b.texImage2D(b.TEXTURE_2D,0,ja,fa,ha,Xa)):b.texImage2D(b.TEXTURE_2D,0,ja,Q,S,0,fa,ha,E);r[u]=Wa;za&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},Ph:function(E,R){a(ta);R&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);b.texImage2D(b.TEXTURE_2D,0,ja,fa,ha,E);r[u]=Wa;R&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},Ch:function(E,R){var ka=Q*S,W=4*ka;E=z.R?
E?"RGBE":"JSON":"RGBA";R&&(E=R);R=aa.ia()&&!1;var La=null;switch(E){case "RGBE":La="s43";break;case "JSON":La=R?"s0":"s13";break;case "RGBA":case "RGBAARRAY":La="s7"}Va||("RGBA"===E||"RGBE"===E||"RGBAARRAY"===E?(Da=new Uint8Array(W),Va=!0):"JSON"!==E||R||sa());la.O();C.set(La);ca.g(0);W=null;if("RGBA"===E||"RGBE"===E||"RGBAARRAY"===E){b.viewport(0,0,Q,S);ma.l(!0,!0);b.readPixels(0,0,Q,S,b.RGBA,b.UNSIGNED_BYTE,Da);if("RGBAARRAY"===E)return{data:Da};K||(H=document.createElement("canvas"),O=H.getContext("2d"),
K=!0);H.width=Q;H.height=S;ka=O.createImageData(Q,S);ka.data.set(Da);O.putImageData(ka,0,0);W=H.toDataURL("image/png")}else if("JSON"===E)if(R)W=new Float32Array(ka),b.viewport(0,0,Q,S),ma.l(!0,!0),b.readPixels(0,0,Q,S,b.RGBA,b.FLOAT,W);else{for(W=0;4>W;++W)b.viewport(0,S*W,Q,S),C.Sd("u9",t[W]),ma.l(!W,!W);ca.Kd();W=Array(ka);for(R=0;R<ka;++R)W[4*R]=ya[0][R],W[4*R+1]=ya[1][R],W[4*R+2]=ya[2][R],W[4*R+3]=ya[3][R]}return{format:E,data:W,width:Q,height:S,isMirrorY:z.isMirrorY,isFlipY:"RGBA"===E?z.isFlipY:
!z.isFlipY}}};z.isMipmap&&!Ka&&Ta&&!cb&&(ca.Qb(),cb=!0);if(z.url)a(ta),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,1,1,0,b.RGBA,b.UNSIGNED_BYTE,null),Ga=new Image,Ga.ng="Anonymous",Ga.crossOrigin="Anonymous",Ga.src=z.url,Ga.onload=function(){Q=Ga.width;S=Ga.height;Y()};else if(z.H){var Eb=function(){I();Q?Y():setTimeout(Eb,1)};Eb()}else z.array?(z.R&&!z.isFloat?z.array instanceof Uint16Array?(ua=z.array,Y()):f()?(ua=d(z.array),Y()):(Y(),J.ed(b,ta,ca.F(),ca.U(),z.array,za,!0)):(ua=z.isFloat?z.array instanceof
Float32Array?z.array:new Float32Array(z.array):z.array instanceof Uint8Array?z.array:new Uint8Array(z.array),Y()),z.isKeepArray||(ua&&ua!==z.array&&(ua=null),delete z.array)):z.Vb?Ta=!0:Y();ca.$g=ca.F;z.ma&&Ta&&(z.ma(ca),z.ma=null);e.push(ca);return ca},O:function(h){h!==u&&(b.activeTexture(l[h]),u=h);r[h]=-1;a(null)},cg:function(h){x.random.g(h)},zc:function(){y=null;b.framebufferTexture2D(la.cb(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0)},reset:function(){0!==u&&b.activeTexture(l[0]);for(var h=0;h<
l.length;++h)r[h]=-1;u=-1},zh:function(){u=-1},Tf:function(){for(var h=0;h<l.length;++h)J.O(h)},fd:function(){x&&(x.random.remove(),x.$d.remove())},Oh:function(h,D){if("RGBA"===h.format||"RGBE"===h.format){var I=new Image;I.src=h.data;I.onload=function(){J.instance({isMirrorY:h.isMirrorY,isFlipY:h.isFlipY,isFloat:!1,H:I,ma:function(M){if("RGBA"===h.format)D(M);else{var Y=h.width,oa=h.height,sa=J.instance({isMirrorY:h.isMirrorY,isFloat:!0,width:Y,height:oa,isFlipY:h.isFlipY});la.da();b.viewport(0,
0,Y,oa);C.set("s44");sa.u();M.g(0);ma.l(!0,!0);J.O(0);D(sa);aa.flush();setTimeout(M.remove,50)}}})}}else"JSON"===h.format?D(J.instance({isFloat:!0,isFlipY:h.isFlipY,width:h.width,height:h.height,array:new Float32Array(h.data)})):D(!1)},ve:d,m:function(){y&&(va.da(),J.zc(),va.O());J.Tf();e.slice(0).forEach(function(h){h.remove()});e.splice(0);w=!1;q=0;"undefined"!==typeof Ba&&Ba.m();x=null}};return J}(),Nb=function(){return{instance:function(a){var c=[Aa.instance(a),Aa.instance(a)],d=[c[1],c[0]],f=
d,k={Df:function(n){f[1].u();f[0].g(n);k.Vd()},Ef:function(n){f[1].$();f[0].g(n);k.Vd()},Vd:function(){f=f===c?d:c},refresh:function(){f[0].refresh();f[1].refresh()},g:function(n){f[0].g(n)},bg:function(n){f[1].g(n)},Ug:function(){return f[0]},Yg:function(){return f[1]},Bb:function(n){f[0].Bb(n);f[1].Bb(n)},remove:function(){f[0].remove();f[1].remove();f=null},sync:function(){k.Ef(0);C.set("s0");T.l(!1,!1)}};return k}}}(),ma=function(){function a(q){var r={aa:null,J:null};r.aa=q.createBuffer();q.bindBuffer(q.ARRAY_BUFFER,
r.aa);q.bufferData(q.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),q.STATIC_DRAW);r.J=q.createBuffer();q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,r.J);q.bufferData(q.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),q.STATIC_DRAW);return r}var c=null,d=0,f=!1,k=[],n=-2,u=-2,l={reset:function(){u=n=-2},o:function(){f||(c=a(b),l.ua(),f=!0)},instance:function(q){var r=d++,x=q.J?q.J.length:0,y="undefined"===typeof q.mode?b.STATIC_DRAW:q.mode,m=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,m);b.bufferData(b.ARRAY_BUFFER,
q.aa instanceof Float32Array?q.aa:new Float32Array(q.aa),y);n=r;var p=null,A=null,w=null;if(q.J){p=b.createBuffer();b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,p);var e=null;65536>q.J.length?(e=Uint16Array,A=b.UNSIGNED_SHORT,w=2):(e=Uint32Array,A=b.UNSIGNED_INT,w=4);e=q.J instanceof e?q.J:new e(q.J);b.bufferData(b.ELEMENT_ARRAY_BUFFER,e,y);u=r}var F={oe:function(K){n!==r&&(b.bindBuffer(b.ARRAY_BUFFER,m),n=r);K&&xa.sc()},ke:function(){u!==r&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,p),u=r)},bind:function(K){F.oe(K);
F.ke()},rg:function(){b.drawElements(b.TRIANGLES,x,A,0)},sg:function(K,H){b.drawElements(b.TRIANGLES,K,A,H*w)},remove:function(){b.deleteBuffer(m);q.J&&b.deleteBuffer(p);F=null}};k.push(F);return F},ua:function(){-1!==n&&(b.bindBuffer(b.ARRAY_BUFFER,c.aa),n=-1);-1!==u&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,c.J),u=-1)},l:function(q,r){q&&ma.ua();r&&xa.Ba();b.drawElements(b.TRIANGLES,3,b.UNSIGNED_SHORT,0)},$a:function(q){q=q||b;var r=a(q);q.bindBuffer(q.ARRAY_BUFFER,r.aa);q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,
r.J);xa.wb(q);q.clear(q.COLOR_BUFFER_BIT);q.drawElements(q.TRIANGLES,3,q.UNSIGNED_SHORT,0);q.flush();q.bindBuffer(q.ARRAY_BUFFER,null);q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,null);q.deleteBuffer(r.aa);q.deleteBuffer(r.J);l.reset();f&&(l.ua(),xa.Ba())},fd:function(){var q=b,r=c;q.deleteBuffer(r.aa);q.deleteBuffer(r.J)},m:function(){l.fd();k.forEach(function(q){q.remove()});b.bindBuffer(b.ARRAY_BUFFER,null);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,null);l.reset();f=!1;k.splice(0);d=0}};return l}(),la=function(){var a=
null,c=null,d=null,f=!1,k=[],n={I:-2,dd:1},u={kb:function(){return f},o:function(){if(!f){a=b.createFramebuffer();var l=aa.ia();c=l&&b.DRAW_FRAMEBUFFER?b.DRAW_FRAMEBUFFER:b.FRAMEBUFFER;d=l&&b.READ_FRAMEBUFFER?b.READ_FRAMEBUFFER:b.FRAMEBUFFER;f=!0}},Rg:function(){return c},Re:function(){return d},cb:function(){return b.FRAMEBUFFER},Zg:function(){return n},Jg:function(){return a},instance:function(l){void 0===l.qd&&(l.qd=!1);var q=l.M?l.M:null,r=l.width,x=void 0!==l.height?l.height:l.width,y=a,m=null,
p=!1,A=!1,w=0;q&&(r=r?r:q.F(),x=x?x:q.U());var e={Rd:function(){p||(y=b.createFramebuffer(),p=!0,w=n.dd++)},fe:function(){e.Rd();e.u();m=b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,m);b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,r,x);b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,m);b.clearDepth(1)},bind:function(F,K){w!==n.I&&(b.bindFramebuffer(c,y),n.I=w);q&&q.u();K&&b.viewport(0,0,r,x);F&&b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},ag:function(){w!==
n.I&&(b.bindFramebuffer(c,y),n.I=w)},clear:function(){b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},jg:function(){b.clear(b.COLOR_BUFFER_BIT)},kg:function(){b.clear(b.DEPTH_BUFFER_BIT)},Lf:function(){b.viewport(0,0,r,x)},u:function(){w!==n.I&&(b.bindFramebuffer(c,y),n.I=w)},rtt:function(F){q=F;n.I!==w&&(b.bindFramebuffer(b.FRAMEBUFFER,y),n.I=w);F.u()},O:function(){b.bindFramebuffer(c,null);n.I=-1},resize:function(F,K){r=F;x=K;m&&(b.bindRenderbuffer(b.RENDERBUFFER,m),b.renderbufferStorage(b.RENDERBUFFER,
b.DEPTH_COMPONENT16,r,x))},remove:function(){y===a||A||(b.bindFramebuffer(c,y),b.framebufferTexture2D(c,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0),m&&b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,null),b.bindFramebuffer(c,null),b.deleteFramebuffer(y),m&&b.deleteRenderbuffer(m));A=!0}};l.qd&&e.fe();k.push(e);return e},O:function(){b.bindFramebuffer(c,null);n.I=-1},Uf:function(){b.bindFramebuffer(c,null);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);aa.Td();n.I=-1},reset:function(){n.I=
-2},da:function(){0!==n.I&&(b.bindFramebuffer(c,a),n.I=0)},clear:function(){aa.Td();b.clear(b.COLOR_BUFFER_BIT)},m:function(){u.O();k.forEach(function(l){l.remove()});null!==a&&(b.deleteFramebuffer(a),a=null);u.reset();f=!1;k.splice(0);n.dd=1}};return u}(),aa=function(){function a(){k="undefined"===typeof Qa?JEContext:Qa;n=!0}function c(e,F){for(var K=0;K<e.length;++K){var H=F.getExtension(e[K]);if(H)return H}return null}function d(){null!==p.Ab&&(clearInterval(p.Ab),p.Ab=null);p.ya=!1}function f(){p.Ma&&
(b.deleteSync(p.Ma),p.Ma=null)}var k=null,n=!1,u={sd:!1,uc:null,vc:null,vd:!1,gf:!1,wc:null,wd:!1,xc:null,td:!1,Fb:null,$e:!1,Gb:null,af:!1},l=null,q={fa:!0,ha:!0,Pb:!0,Jd:!1},r=null,x=!0,y=null,m=null,p={ya:!1,wa:null,Ma:null,Ub:-1,V:null,Ab:null},A="undefined"===typeof window?{}:window,w={o:function(){if(n)return!0;w.reset();n||a();var e=b;if(!l.sd){l.uc=w.$c(e);A.GL_EXT_FLOAT=l.uc;l.vd=l.uc?!0:!1;if(l.vd||w.ia())l.vc=w.ad(e),l.gf=l.vc?!0:!1,A.GL_EXT_FLOATLINEAR=l.vc;l.sd=!0}if(!l.td){l.wc=w.Ya(e);
l.wc&&(l.wd=!0,A.GL_EXT_HALFFLOAT=l.wc);if(l.wd||w.ia())l.xc=w.bd(e),A.GL_EXT_HALFFLOATLINEAR=l.xc;l.gh=l.xc?!0:!1;l.td=!0}l.Fb=w.Yc(e);l.$e=l.Fb?!0:!1;A.GL_EXT_COLORBUFFERFLOAT=l.Fb;l.Gb=w.Zc(e);l.af=l.Gb?!0:!1;A.GL_EXT_COLORBUFFERHALFFLOAT=l.Gb;la.o();Aa.o();if(!w.ye())return!1;ma.o();Aa.Ze();return!0},reset:function(){l=Object.assign({},u);r=Object.assign({},q)},F:function(){n||a();return k.F()},U:function(){n||a();return k.U()},ia:function(){n||a();return k.ia()},Xc:function(e){w.Yc(e);w.Zc(e);
w.$c(e);w.ad(e);w.Ya(e);w.bd(e)},Yc:c.bind(null,["EXT_color_buffer_float","WEBGL_color_buffer_float","OES_color_buffer_float"]),Zc:c.bind(null,["EXT_color_buffer_half_float","WEBGL_color_buffer_half_float","OES_color_buffer_half_float"]),$c:c.bind(null,["OES_texture_float","MOZ_OES_texture_float","WEBKIT_OES_texture_float"]),ad:c.bind(null,["OES_texture_float_linear","MOZ_OES_texture_float_linear","WEBKIT_OES_texture_float_linear"]),Ya:c.bind(null,["OES_texture_half_float","MOZ_OES_texture_half_float",
"WEBKIT_OES_texture_half_float"]),bd:c.bind(null,["OES_texture_half_float_linear","MOZ_OES_texture_half_float_linear","WEBKIT_OES_texture_half_float_linear"]),Rb:function(e){var F=w.Ya(e);return F&&F.HALF_FLOAT_OES?F.HALF_FLOAT_OES:e.HALF_FLOAT||e.FLOAT},Oe:function(){return m||b.RGBA32F||b.RGBA},Pe:function(){return y||b.RGBA16F||b.RGBA},Le:function(){return r},Oc:function(){return r.fa},fg:function(){return r.ha},eg:function(){return r.Pb},qe:function(){return r.Jd&&x},Yd:function(e){x=e;!e&&p.ya&&
(f(),b.bindBuffer(p.V,null),p.ya=!1)},mh:function(){return p.ya},xb:function(e,F,K){function H(){e.bindTexture(e.TEXTURE_2D,null);e.bindFramebuffer(O,null);e.deleteTexture(N);e.deleteFramebuffer(L)}var O=e.FRAMEBUFFER,t=e.NEAREST,L=e.createFramebuffer();e.bindFramebuffer(O,L);var N=e.createTexture();e.activeTexture(e.TEXTURE0);e.bindTexture(e.TEXTURE_2D,N);e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,
e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t);e.texImage2D(e.TEXTURE_2D,0,F,3,3,0,e.RGBA,K,null);e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,N,0);if(e.checkFramebufferStatus(e.READ_FRAMEBUFFER||e.FRAMEBUFFER)!==e.FRAMEBUFFER_COMPLETE)return H(),!1;xa.rc(e);e.clearColor(0,0,0,0);e.viewport(0,0,3,3);e.disable(e.DEPTH_TEST);e.clear(e.COLOR_BUFFER_BIT);ma.$a(e);e.bindFramebuffer(O,null);xa.Ra(e);e.activeTexture(e.TEXTURE0);
e.bindTexture(e.TEXTURE_2D,N);ma.$a(e);F=new Uint8Array(36);e.readPixels(0,0,3,3,e.RGBA,e.UNSIGNED_BYTE,F);H();for(K=0;36>K;++K)if(3!==K%4&&3<Math.abs(F[K]-127))return!1;return!0},Ib:function(e){var F={fa:!1,ha:!1};e.disable(e.BLEND);e.clearColor(0,0,0,0);e.clear(e.COLOR_BUFFER_BIT);e.RGBA32F&&w.xb(e,e.RGBA32F,e.FLOAT)&&(F.fa=!0,m=e.RGBA32F);!F.fa&&w.xb(e,e.RGBA,e.FLOAT)&&(F.fa=!0,m=e.RGBA);var K=w.Rb(e);y=null;e.RGBA16F&&w.xb(e,e.RGBA16F,K)&&(F.ha=!0,y=e.RGBA16F);!F.ha&&w.xb(e,e.RGBA,K)&&(F.ha=!0,
y=e.RGBA);return F},ze:function(){var e=la.instance({width:2});e.Rd();var F=Aa.instance({width:2,isFloat:!0,pb:3});e.u();F.u();w.flush();b.checkFramebufferStatus(la.Re())!==b.FRAMEBUFFER_COMPLETE?(Aa.Gf(),r.Pb=!1):r.Pb=!0;e.remove();F.remove()},Ae:function(){var e=!1;w.ia()&&(e="PIXEL_PACK_BUFFER STREAM_READ SYNC_GPU_COMMANDS_COMPLETE WAIT_FAILED fenceSync deleteSync createBuffer".split(" ").every(function(F){return"undefined"!==typeof b[F]}));r.Jd=e},ye:function(){var e=w.Ib(b);Object.assign(r,e);
if(!r.fa&&!r.ha)return!1;w.ze();w.Ae();return!0},Bf:function(e,F,K,H,O){b.readPixels(e,F,K,H,b.RGBA,b.UNSIGNED_BYTE,O);return Promise.resolve(O,!1)},ub:function(e,F,K,H,O,t){if(!w.qe())return w.Bf(e,F,K,H,O);null===p.wa&&(p.V=b.PIXEL_PACK_BUFFER,p.wa=b.createBuffer(),p.Ub=-1);b.bindBuffer(p.V,p.wa);O.byteLength!==p.Ub&&(b.bufferData(p.V,O.byteLength,b.STREAM_READ),p.Ub=O.byteLength);b.readPixels(e,F,K,H,b.RGBA,b.UNSIGNED_BYTE,0);p.Ma=b.fenceSync(b.SYNC_GPU_COMMANDS_COMPLETE,0);w.flush();var L=!1;
return new Promise(function(N,v){function g(){if(!p.ya)return d(),v(),!1;switch(b.clientWaitSync(p.Ma,0,0)){case b.TIMEOUT_EXPIRED:case b.WAIT_FAILED:return!1;default:return d(),f(),b.getBufferSubData(p.V,0,O),b.bindBuffer(p.V,null),N(O,L),!0}}d();p.ya=!0;g()||(t&&!L&&(L=!0,t()),p.Ab=setInterval(g,0))})},Td:function(){b.viewport(0,0,w.F(),w.U())},flush:function(){b.flush()},m:function(){d();f();Aa.m();la.m();ma.m();null!==p.wa&&(b.deleteBuffer(p.wa),p.wa=null);xa.reset();n=!1}};return w}(),T=ma,va=
la,X=Aa,Ba=function(){function a(t,L,N,v){e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,v?e.NEAREST_MIPMAP_NEAREST:e.LINEAR);var g=null;if(null!==N)try{g=e.getError();if("FUCKING_BIG_ERROR"===g)return!1;e.texImage2D(e.TEXTURE_2D,0,t,4,4,0,e.RGBA,L,N);g=e.getError();if(g!==e.NO_ERROR)return!1}catch(B){return!1}v&&e.generateMipmap(e.TEXTURE_2D);e.clear(e.COLOR_BUFFER_BIT);T.$a(e);g=e.getError();if("FUCKING_BIG_ERROR"===g)return!1;e.readPixels(0,0,2,2,e.RGBA,e.UNSIGNED_BYTE,x);g=e.getError();g===
e.INVALID_OPERATION&&"undefined"!==typeof e.PIXEL_PACK_BUFFER&&(e.bindBuffer(e.PIXEL_PACK_BUFFER,null),e.readPixels(0,0,2,2,e.RGBA,e.UNSIGNED_BYTE,x),g=e.getError());if(g!==e.NO_ERROR)return!1;N=!0;for(v=0;16>v;++v)N=N&&4>Math.abs(x[v]-127);N&&(q.Gd=L,q.pd=t);return N}function c(t,L){return F.fa&&a(t,e.FLOAT,new Float32Array(y),L)?(l=u.Hc,!0):!1}function d(t,L,N){if(!F.ha)return!1;var v=Aa.ve(y),g=aa.Ya(e);if(g&&g.HALF_FLOAT_OES&&a(t,g.HALF_FLOAT_OES,v,L)||e.HALF_FLOAT&&a(t,e.HALF_FLOAT,v,L))return l=
u.Fa,!0;v=new Float32Array(y);if(a(t,e.FLOAT,v,L))return l=u.Fa,!0;e.bindTexture(e.TEXTURE_2D,N);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,2,2,0,e.RGBA,e.UNSIGNED_BYTE,null);e.bindFramebuffer(q.Wa,O);Aa.ed(e,N,2,2,v,!1,!1);e.bindFramebuffer(q.Wa,null);e.bindTexture(e.TEXTURE_2D,N);return a(t,null,null,L)?(l=u.Fa,!0):!1}function f(t,L,N){r=!0;if(d(t,!0,N)||c(L,!0))return!0;r=!1;return d(t,!1,N)||c(L,!1)?!0:!1}function k(t){if(l===u.P){e=t||b;l=u.RGBA8;r=!0;aa.Xc(e);F||(F=aa.Ib(e));va.reset();O=e.createFramebuffer();
q.Wa=e.DRAW_FRAMEBUFFER||e.FRAMEBUFFER;e.bindFramebuffer(q.Wa,null);e.clearColor(0,0,0,0);e.viewport(0,0,2,2);C.P();K=C.Ra(e);t=e.createTexture();e.activeTexture(e.TEXTURE0);e.bindTexture(e.TEXTURE_2D,t);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);H=t;var L=t=e.RGBA,N=e.RGBA16F,v=e.RGBA32F;v&&(t=v);N&&(L=N);if((N||v)&&f(L,t,H))return n(),!0;t=L=e.RGBA;if(f(L,t,H))return n(),
!0;l=u.RGBA8;n();return!1}}function n(){e.deleteProgram(K.qa);e.deleteTexture(H);H=K=null}for(var u={P:-1,Hc:3,Fa:2,RGBA8:0},l=u.P,q={Gd:null,pd:null,Wa:null},r=!0,x=new Uint8Array(16),y=Array(64),m=0;4>m;++m)for(var p=0;4>p;++p){var A=0===(p+m)%2?1:0,w=4*m+p;y[4*w]=A;y[4*w+1]=A;y[4*w+2]=A;y[4*w+3]=A}var e=null,F=null,K=null,H=null,O=null;return{pe:function(t){k(t);return r},Nc:function(t,L){l===u.P&&(typeof("undefined"!==L)&&(F=L),k(t));return l!==u.RGBA8},jh:function(t){k(t);return l===u.Hc},hf:function(t){k(t);
return l===u.Fa},Sg:function(t){k(t);return q.Gd},Qe:function(t){k(t);return q.pd},m:function(){e=null;r=!0;l=u.P;F=null}}}(),Ub=function(){return{instance:function(a){var c=X.instance(a.alpha),d=X.instance(a.beta);return{Ce:function(){c.g(1);d.g(2)}}}}}(),Gb=function(){return{instance:function(a){var c=null,d=!1,f=!1,k=null,n=!1,u=!1,l=null,q="undefined"===typeof a.preprocessing?!1:a.preprocessing,r="undefined"===typeof a.preprocessingSize?a.size:a.preprocessingSize;a.mask&&(d=!0,ea&&void 0!==ea.je&&
(a.mask=ea.je+a.mask),c=X.instance({isFloat:!1,url:a.mask}));var x=!1;a.customInputShader&&(x="s45",C.Jc({name:"_",id:x,h:a.customInputShader,Nh:["uSource"],precision:"lowp"}),C.S(x,[{type:"1i",name:"_",value:0}]));switch(q){case "sobel":l="s32";n=!0;break;case "meanNormalization":l="s33";n=!0;break;case "grayScale":l="s29";n=!1;break;case "grayScaleTilt":l="s30";u=!0;n=!1;break;case "rgbGrayTilt":l="s31";u=!0;n=!1;break;case "copy":l=x?x:"s0";break;case "inputLightRegulation":l=x?x:"s29";k=Vb.instance({od:r,
Fd:a.size,Cd:a.nBlurPass,jb:!1});f=!0;break;case "inputMix0":l="none";k=Wb.instance({C:r,ae:a.varianceMin,Mc:a.blurKernelSizePx,jb:!1});f=!0;break;case "direct":case "none":l="abort";break;default:l="s4"}u&&C.S(l,[{name:"u27",type:"1f",value:a.tilt}]);d&&(l+="Mask");var y=X.instance({isFloat:!1,isPot:!1,width:a.size}),m={F:function(){return r},Sb:function(){return m.F()},Ve:function(){return f?k.Tb():y},T:function(p){va.da();"abort"!==l&&("none"!==l&&(C.set(l),n&&C.G("u28",1/a.size),y.$(),d&&c.g(1),
T.l(!1,!1),y.g(0),p=y),f&&k.process(p))},m:function(){y.remove();d&&c.remove()}};return m}}}(),Hb=function(){return{instance:function(a){function c(h){k.forEach(function(D,I){n[I][0]=h[0][D];n[I][1]=h[1][D];n[I][2]=h[2][D];n[I][3]=h[3][D]});return n}a.normalize=a.normalize||!1;var d={input:null,bias:null,Yb:null,Z:null,qb:null,lc:null,mc:null},f=null,k=[],n=[],u=!1,l=null,q=!0,r=-1,x=a.isReorganize?a.isReorganize:!1,y=a.kernelsCount?!0:!1,m=a.dynPelu?Ub.instance(a.dynPelu):!1,p=m?!0:!1,A={isEnabled:!1};
a.ef?(a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.sb.Sb(),q=!1):"full"===a.connectivityUp&&(a.sparsity=a.sb.Sb());var w={elu:"s16",elu01:"s17",relu:"s15",arctan:"s19",sigmoid:"s14",copy:"s0",softplus:"s20",dynPelu:"s18"}[a.activation],e=a.sparsity*a.sparsity,F=!1,K=a.size,H="";if(a.maxPooling){switch(a.maxPooling.size){case 2:H="s34";break;case 4:H="s35"}F=!0;K/=a.maxPooling.size;d.lc=X.instance({isFloat:!0,isPot:!1,width:K})}var O=a.normalization?!0:!1,t=null,L=null,N=null;if(O){t="s46"+
a.index.toString();C.nd("s46",t,[((a.normalization.n-1)/2).toFixed(1)]);C.S(t,[{type:"1i",name:"u1",value:0},{type:"2f",name:"u8",value:[1/a.size,1/a.size]},{type:"1f",name:"u7",value:a.normalization.alpha},{type:"1f",name:"u10",value:a.normalization.beta},{type:"1f",name:"u31",value:a.normalization.k}]);var v={isFloat:!0,isPot:!0,width:a.size};L=X.instance(v);N=X.instance(v)}var g=-1,B=null;q&&(d.Z=X.instance({isFloat:!0,isPot:!1,width:a.size}));d.bias=X.instance(a.bias);var J={F:function(){return a.size},
Sb:function(){return K},gd:function(){return a.classesCount},le:function(h){f.g(h)},vf:function(){a.remap&&a.remap.isEnabled&&(A={isEnabled:!0,lf:X.instance({isFloat:!1,isFlipY:!1,array:new Uint8Array(a.remap.maskTexture.data),width:a.remap.maskTexture.width,isPot:!1}),mb:a.remap.layers.map(function(h){return a.parent.Te(h)}),depth:a.remap.depth})},Hf:function(){switch(a.connectivityUp){case "direct":B=Xb.instance(a.connectivity);break;case "square":B=Yb.instance(a.connectivity);break;case "squareFast":B=
Zb.instance(a.connectivity,a.activation);break;case "full":B=$b.instance(a.connectivity);break;case "conv":r=a.kernelsCount,B=ac.instance(a.connectivity),x&&(d.qb=X.instance({width:K,isFloat:!0,isFlipY:!1,isPot:!1}))}if(B.Ca){var h=a.size*a.sparsity;g=Math.log(h/a.size)/Math.log(2);d.input=X.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:h,dc:g});d.Yb=X.instance({isFloat:!0,isPot:!0,width:a.size})}},T:function(h,D){f=h;B.Ca?(d.input.$(),y&&d.bias.g(2),B.T(A),d.input.g(0),d.input.Ie(g),d.Yb.$(),y?
C.set("s0"):(C.set("s28"),C.G("u26",e),d.bias.g(1)),d.input.me(g,0),T.l(!1,!1),C.set(w),O?L.u():d.Z.u(),d.Yb.g(0),p&&m.Ce(),T.l(!1,!1)):(d.Z.$(),d.bias.g(1),B.T());O&&(C.set(t),N.u(),L.g(0),T.l(!1,!1),C.set("s47"),C.G("u7",1),d.Z.u(),N.g(1),T.l(!1,!1));if(q)return F?(d.lc.$(),d.Z.g(0),C.set(H),C.ra("u8",1/a.size,1/a.size),T.l(!1,!1),D=d.lc):D=d.Z,D.g(0),x&&(d.qb.u(),C.set("s22"),C.ra("u13",r,K/r),T.l(!1,!1),D=d.qb,d.qb.g(0)),D;var I=d.Z;a.normalize&&(C.set("gpuRawAvg"===u?"s9":"s8"),C.G("u4",1/a.size),
d.mc.$(),d.Z.g(0),T.l(!1,!1),I=d.mc);h=null;switch(u){case "cpuRGBA2Float":I.Uc(!1);D?h=J.wf(I).then(l):(I=J.xf(I),l(I));break;case "cpuMeanFloat":I.Uc(!0);if(D)h=I.zf().then(l);else{I=I.Af();for(var M=0;M<I.length;++M);l(I)}break;case "gpuRawAvg":case "gpuRaw":I.g(0);case "none":null!==l&&l(I)}D&&null===h&&(h=Promise.resolve());return h},xe:function(h){h&&(u=h.nc||"none",l=h.kc||null);d.Z=X.instance({isFloat:!0,isPot:!0,isMipmap:!1,width:a.size});h="undefined"!==typeof a.classesCount&&a.classesCount?
a.classesCount:a.size*a.size;for(var D=0,I=0,M=0;D<h;++D)k.push(I+(a.size-1-M)*a.size),n.push([-1,-1,-1,-1]),++I,I===a.size&&(I=0,++M);a.normalize&&(d.mc=X.instance({isFloat:!0,isPot:!0,width:a.size}))},wf:function(h){return h.yf().then(c)},xf:function(h){h=h.Kd();c(h);return n},m:function(){for(var h in d){var D=d[h];D&&D.remove()}B&&(B.m(),B=null)}};a.sb&&J.Hf(a.sb);return J}}}(),Xb=function(){return{instance:function(a){var c=X.instance(a.weights);return{Ca:!0,bb:function(){return 1},m:function(){c.remove()},
Ye:function(){return c},T:function(){C.set("s27");c.g(1);T.l(!1,!1)}}}}}(),$b=function(){return{instance:function(a){var c=a.fromLayerSize,d=X.instance(a.weights);return{Ca:!0,bb:function(){return c},m:function(){d.remove()},T:function(f){if(f.isEnabled){C.set("s25");f.lf.g(3);var k,n=Math.min(f.mb.length,f.depth);for(k=0;k<n;++k)f.mb[k].le(4+k)}else C.set("s24");C.G("u17",a.toLayerSize);d.g(1);T.l(!1,!1)}}}}}(),Yb=function(){return{instance:function(a){for(var c=a.fromLayerSize,d=a.toLayerSize,f=
a.toSparsity,k=f*d,n=k/c,u=c/d,l=0,q=0,r=0,x=Array(f*d*f*d*4),y=Array(f*d*f*d*4),m=Array(c*c),p=0;p<m.length;++p)m[p]=0;p=Math.floor(f/2);for(var A=.5/d,w=.5/c,e=.5/k,F=0;F<d;++F)for(var K=Math.round(F*u),H=0;H<d;++H){var O=Math.round(H*u),t=F/d,L=H/d;t+=A;L+=A;for(var N=0;N<f;++N){var v=K+N-p;0>v&&(v+=c);v>=c&&(v-=c);for(var g=0;g<f;++g){var B=l/k,J=q/k,h=O+g-p;0>h&&(h+=c);h>=c&&(h-=c);var D=v/c,I=h/c;J=1-J-1/k;D+=w;I+=w;B+=e;J+=e;var M=F*f+N,Y=H*f+g;Y=d*f-Y-1;M=Y*d*f+M;x[4*M]=B;x[4*M+1]=J;x[4*M+
2]=D;x[4*M+3]=I;I=m[h*c+v]++;M=I%n;D=v*n+M;h=h*n+(I-M)/n;h=c*n-1-h;h=h*c*n+D;y[4*h]=B;y[4*h+1]=J;y[4*h+2]=t;y[4*h+3]=L;++l>=k&&(l=0,++q);++r}}}m=null;var oa=X.instance(a.weights);delete a.weights.data;var sa=X.instance({width:k,isFloat:!0,array:new Float32Array(y),isPot:!0});y=null;var Ca=X.instance({width:k,isFloat:!0,array:new Float32Array(x),isPot:!0});x=null;return{Ca:!0,bb:function(){return n},m:function(){sa.remove();Ca.remove();oa.remove()},T:function(){C.set("s23");oa.g(1);Ca.g(2);T.l(!1,
!1)}}}}}(),ac=function(){return{instance:function(a){var c=a.kernelsCount,d=a.toSparsity,f=d*a.toLayerSize/a.fromLayerSize,k=X.instance(a.weights);return{Ca:!0,bb:function(){return f},dh:function(){return d},Ye:function(){return k},m:function(){k.remove()},T:function(){C.set("s26");C.G("u23",c);C.G("u24",d);C.G("u17",a.toLayerSize);C.G("u25",a.fromLayerSize);k.g(1);T.l(!1,!1)}}}}}(),Zb=function(){return{instance:function(a,c){var d=a.fromLayerSize,f=a.toLayerSize,k=a.toSparsity,n=a.stride?a.stride:
1,u=k*f/d,l=f<d,q=d/f,r=X.instance(a.weights),x="s48"+[d.toString(),f.toString(),k.toString(),n.toString(),c].join("_");C.Ge(x)||(a=Sb.Je(c,"gl_FragColor","gl_FragColor"),f=[{type:"1f",name:"u17",value:f},{type:"1f",name:"u30",value:n}],l&&f.push({type:"1f",name:"u25",value:d}),d=[(l?u:k).toFixed(1),a],l&&d.push(q.toFixed(1)),C.nd(l?"s40":"s39",x,d),C.S(x,f.concat([{type:"1i",name:"u15",value:0},{type:"1i",name:"u22",value:1},{type:"1i",name:"u14",value:3}])));return{Ca:!1,bb:function(){return u},
m:function(){r.remove()},T:function(){C.set(x);r.g(3);T.l(!1,!1)}}}}}(),Vb=function(){return{instance:function(a){var c=a.Cd?a.Cd:3,d=a.od?a.od:64,f=a.Fd?a.Fd:64,k=a.jb?!0:!1;a={isFloat:!1,width:d,isPot:!1,isFlipY:!1};var n=X.instance(a),u=X.instance(a),l=X.instance(a),q=X.instance(a),r=X.instance({isFloat:!0,width:f,isPot:!1,isFlipY:!1}),x=1/d;return{process:function(y){C.set("s36");q.u();T.l(k,!1);C.set("s37");for(var m=0;m<c;++m)n.u(),C.ra("u8",x,0),T.l(k,!1),l.u(),q.g(0),T.l(k,!1),u.u(),n.g(0),
C.ra("u8",0,x),T.l(k,!1),q.u(),l.g(0),T.l(k,!1),m!==c-1&&u.g(0);C.set("s38");r.u();y.g(0);u.g(1);q.g(2);T.l(k,!1);r.g(0)},Tb:function(){return r}}}}}(),Wb=function(){return{instance:function(a){function c(r){return X.instance({isFloat:r,width:d.C,isPot:!1,isFlipY:!1})}var d=Object.assign({ae:.1,Mc:9,C:128,jb:!1},a),f=c(!1),k=[c(!1),c(!1),c(!1)],n=[c(!1),c(!1),c(!1)],u=c(!0),l=[f,n[0],n[1]];a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u32;varying vec2 vv0;void main(){float b=0.,c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u32*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).r,c+=f;}b/=c,gl_FragColor=vec4(b,0.,0.,1.);}".replace("1.1111",
Math.round((d.Mc-1)/2).toFixed(2)).replace("2.2222",(1/d.C).toFixed(6));var q={u1:0};C.Kc([{id:"s50",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.,1.,1.);void main(){vec3 b=texture2D(u1,vv0).rgb;float a=dot(b,f);gl_FragColor=vec4(a,a,a,a);}",j:q,i:["u1"],precision:"lowp"},{id:"s51",name:"_",h:a,j:q,i:["u1","u32"],precision:"lowp"},{id:"s52",name:"_",h:"uniform sampler2D u33,u34,u35,u36;const float f=1.1111;const vec3 g=vec3(1.,1.,1.);varying vec2 vv0;void main(){vec3 a=texture2D(u33,vv0).rgb;float c=texture2D(u34,vv0).r,d=texture2D(u35,vv0).r,h=texture2D(u36,vv0).r,i=a.r*a.r;vec3 b=vec3(c,d,h),j=max(g*f,abs(i-b*b)),k=sqrt(j);gl_FragColor=vec4(a.r,(a-b)/k);}".replace("1.1111",
d.ae.toFixed(4)),j:{u33:0,u34:1,u35:2,u36:3},i:["u33","u34","u35","u36"],precision:"highp"}]);return{process:function(){C.set("s50");f.$();T.l(d.jb,!1);C.set("s51");for(var r=0;3>r;++r)C.ra("u32",1,0),k[r].u(),l[r].g(0),T.l(!1,!1),C.ra("u32",0,1),n[r].u(),k[r].g(0),T.l(!1,!1);C.set("s52");u.u();f.g(0);n[0].g(1);n[1].g(2);n[2].g(3);T.l(!1,!1);u.g(0)},Tb:function(){return u}}}}}(),V={ld:function(){return V.Sc()?document.createElement("video"):!1},Ka:function(a,c){a[c]=!0;a.setAttribute(c,"true")},te:function(){var a=
!1,c=navigator.userAgent||navigator.vendor||window.opera;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(c)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(c.substr(0,
4)))a=!0;return a},Pc:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},Ke:function(){var a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return a&&a.length&&2<a.length?[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||0,10)]:[0,0,0]},zd:function(){try{return window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(a){return window.innerHeight>window.innerWidth}},se:function(){return V.Qc()||V.Pc()},Qc:function(){var a=navigator.userAgent.toLowerCase();
return-1!==a.indexOf("safari")&&-1===a.indexOf("chrome")?!0:!1},Gg:function(){return V.te()?V.zd()?window.innerHeight/window.innerWidth*45:45:45},Sc:function(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1},pause:function(a){a.pause()},Ah:function(a){a.play()},release:function(a){a.pause();a.videoStream&&a.videoStream.stop();a.videoStream=null},Rc:function(a){if(!a)return a;var c=null;if(a.video){var d=function(f){return f&&"object"===typeof f?Object.assign({},f):f};c={};
"undefined"!==typeof a.video.width&&(c.width=d(a.video.width));"undefined"!==typeof a.video.height&&(c.height=d(a.video.height));"undefined"!==typeof a.video.facingMode&&(c.facingMode=d(a.video.facingMode))}c={audio:a.audio,video:c};"undefined"!==typeof a.deviceId&&V.Ic(c,a.deviceId);return c},Ic:function(a,c){c&&(a.video=a.video||{},a.video.deviceId={exact:c},a.video.facingMode&&delete a.video.facingMode)},Wd:function(a){var c=a.video.width;a.video.width=a.video.height;a.video.height=c;return a},
we:function(a){function c(m){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(p,A){return Math.abs(p-m)-Math.abs(A-m)})}function d(m){var p=V.Rc(a);m=m(p);k.push(m);f(m)}function f(m){if(m.video&&m.video.facingMode&&m.video.facingMode.exact){var p=m.video.facingMode.exact;m=V.Rc(m);delete m.video.facingMode.exact;m.video.facingMode.ideal=p;k.push(m)}}var k=[];if(!a||!a.video)return k;f(a);if(a.video.width&&a.video.height){if(a.video.width.ideal&&a.video.height.ideal){var n=
c(a.video.width.ideal).slice(0,3),u=c(a.video.height.ideal).slice(0,3),l={},q=0;for(l.la=void 0;q<n.length;l={la:l.la},++q){l.la=n[q];var r={},x=0;for(r.ka=void 0;x<u.length;r={ka:r.ka},++x)if(r.ka=u[x],l.la!==a.video.width.ideal||r.ka!==a.video.height.ideal){var y=Math.max(l.la,r.ka)/Math.min(l.la,r.ka);y<4/3-.1||y>16/9+.1||d(function(m,p){return function(A){A.video.width.ideal=m.la;A.video.height.ideal=p.ka;return A}}(l,r))}}}d(function(m){return V.Wd(m)})}a.video.width&&a.video.height&&(a.video.width.ideal&&
a.video.height.ideal&&d(function(m){delete m.video.width.ideal;delete m.video.height.ideal;return m}),d(function(m){delete m.video.width;delete m.video.height;return m}));a.video.facingMode&&(d(function(m){delete m.video.facingMode;return m}),a.video.width&&a.video.height&&d(function(m){V.Wd(m);delete m.video.facingMode;return m}));k.push({audio:a.audio,video:!0});return k},Qf:function(a){if(V.zd()){if(!a||!a.video)return!1;var c=a.video.width,d=a.video.height;if(!c||!d)return!1;if(c.ideal&&d.ideal&&
c.ideal>d.ideal)return a.video.height=c,a.video.width=d,!0}return!1},ob:function(a){a.volume=0;V.Ka(a,"muted");if(V.Qc()){if(1===a.volume){var c=function(){a.volume=0;window.removeEventListener("mousemove",c,!1);window.removeEventListener("touchstart",c,!1)};window.addEventListener("mousemove",c,!1);window.addEventListener("touchstart",c,!1)}setTimeout(function(){a.volume=0;V.Ka(a,"muted")},5)}},Zd:function(a,c,d){return null===a?Promise.resolve():new Promise(function(f,k){if(a.srcObject&&a.srcObject.getVideoTracks){var n=
a.srcObject.getVideoTracks();1!==n.length?k("INVALID_TRACKNUMBER"):(n=n[0],c?V.get(a,f,k,d):(n.stop(),f()))}else k("BAD_IMPLEMENTATION")})},kd:function(a,c,d,f){function k(u){n||(n=!0,d(u))}var n=!1;return navigator.mediaDevices.getUserMedia(f).then(function(u){function l(){setTimeout(function(){if(a.currentTime){var r=a.videoWidth,x=a.videoHeight;if(0===r||0===x)k("VIDEO_NULLSIZE");else{r&&(a.style.width=r.toString()+"px");x&&(a.style.height=x.toString()+"px");var y={re:null,Mf:null,mf:null};try{var m=
u.getVideoTracks()[0];m&&(y.mf=m,y.re=m.getCapabilities(),y.Mf=m.getSettings())}catch(p){}V.se()?a.parentNode&&null!==a.parentNode?(n||c(a,u,y),setTimeout(function(){a.play()},100)):(document.body.appendChild(a),V.ob(a),setTimeout(function(){a.style.transform="scale(0.0001,0.0001)";a.style.position="fixed";a.style.bottom="0px";a.style.right="0px";V.ob(a);setTimeout(function(){a.play();n||c(a,u,y)},100)},80)):n||c(a,u,y)}}else k("VIDEO_NOTSTARTED")},700)}function q(){a.removeEventListener("loadeddata",
q,!1);var r=a.play();V.ob(a);"undefined"===typeof r?l():r.then(function(){l()}).catch(function(){k("VIDEO_PLAYPROMISEREJECTED")})}"undefined"!==typeof a.srcObject?a.srcObject=u:(a.src=window.URL.createObjectURL(u),a.videoStream=u);V.ob(a);a.addEventListener("loadeddata",q,!1)}).catch(function(u){k(u)})},We:function(a,c){var d=c||V.ld();return new Promise(function(f,k){V.get(d,f,k,a)})},get:function(a,c,d,f){if(!a)return d&&d("VIDEO_NOTPROVIDED"),!1;if(!V.Sc())return d&&d("MEDIASTREAMAPI_NOTFOUND"),
!1;if(f&&f.video){if(V.Pc()){var k=V.Ke();0!==k[0]&&(12>k[0]||12===k[0]&&2>k[1])&&V.Qf(f)}f.video.width&&f.video.width.ideal&&(a.style.width=f.video.width.ideal+"px");f.video.height&&f.video.height.ideal&&(a.style.height=f.video.height.ideal+"px")}V.Ka(a,"autoplay");V.Ka(a,"playsinline");f&&f.audio?a.volume=0:V.Ka(a,"muted");V.kd(a,c,function(){function n(l){if(0===l.length)d("INVALID_FALLBACKCONSTRAINTS");else{var q=l.shift();V.kd(a,c,function(){n(l)},q)}}var u=V.we(f);n(u)},f)},Xe:function(a){if(!navigator.mediaDevices||
!navigator.mediaDevices.enumerateDevices)return a(!1,"NOTSUPPORTED"),!1;navigator.mediaDevices.enumerateDevices().then(function(c){(c=c.filter(function(d){return d.kind&&-1!==d.kind.toLowerCase().indexOf("video")&&d.label&&d.deviceId}))&&c.length&&0<c.length?a(c,!1):a(!1,"NODEVICESFOUND")}).catch(function(){a(!1,"PROMISEREJECTED")})},gg:function(a,c,d){var f={};f[c]=d;c=[];c.push(f);a.applyConstraints({advanced:c}).catch(function(){})}},qa=function(){function a(A,w,e,F,K,H,O){if(!m)if(O===H.length)K();
else{switch(H[O]){case "A":e();break;case "D":A();break;case "S":w().then(function(t,L){p.zb();a(A,w,e,L?null:F,K,H,++O)}).catch(function(t){K();throw t;});return;case "R":F&&F()}a(A,w,e,F,K,H,++O)}}var c={n:5,hc:1,Bd:0,ab:[35,49],Xa:[2,200],k:.7,Vf:200,uf:.05},d=-1,f=null,k=-1,n=-1,u=0,l=-1,q=-1,r=0,x=0,y=c.Xa[1],m=!0,p={Ue:function(){switch(d){case -1:return-1;case 0:return q+f.Bd;case 1:return r}},Lg:function(A){return Math.pow(Math.min(Math.max(l,0),f.n-1)/(f.n-1),A||1)},o:function(A){f=Object.assign({},
c,A);l=q=f.hc;d=0;p.reset()},zb:function(A){A=("undefined"===typeof A?Date.now():A)||0;var w=Math.min(Math.max(A-x,f.Xa[0]),f.Xa[1]);y=w;x=A;var e=-1===k?0:f.k;k=Math.min(Math.max(1E3/w,5),120)*(1-e)+k*e;A-n>f.Vf&&5<++u&&(w=f.k,l=l*(1-w)+(k<f.ab[0]?q-1:k>f.ab[1]?q+1:q)*w,Math.abs(l-q)>1-f.uf&&(w=Math.min(Math.max(Math.round(l),0),f.n-1),w!==q&&(l=q=w,k=(f.ab[1]-f.ab[0])/2)),n=A)},oc:function(A,w,e,F,K,H){m=!1;a(A,w,e,F,K,H,0)},stop:function(){m=!0},qc:function(A){r=A;d=1},Ac:function(){d=0;p.reset()},
reset:function(){y=c.Xa[1];n=k=-1;u=0},Ne:function(){return y}};return p}(),Ma=function(){function a(){d(w+p.fc);e.port.postMessage("DONE")}function c(){var g=p.ca;t.isEnabled&&(g=Math.max(g,t.ca));O.Sa=0===g?K(d):K(f)}function d(g){H.za&&null!==A&&(g-=w,g=Math.min(Math.max(g,p.Vc[0]),p.Vc[1]),w+=g,n(),t.isEnabled&&t.Oa&&H.W&&w-t.bc>p.Fc&&(r(),t.bc=w),A(w))}function f(g){H.za&&(O.timeout=window.setTimeout(d.bind(null,g),p.ca))}function k(){A=null;H.za=!1;n()}function n(){O.Sa&&(window.cancelAnimationFrame(O.Sa),
O.Sa=null);O.timeout&&(window.clearTimeout(O.timeout),O.timeout=null)}function u(g){g&&!H.W?(H.W=!0,F&&qa.Ac(),e.port.postMessage("STOP"),aa.Yd(!0),c()):!g&&H.W&&(H.W=!1,F&&qa.qc(1),aa.Yd(!1),e.port.postMessage("START"))}function l(g){g.target.hidden?N():L()}function q(g,B,J){B=g.createShader(B);g.shaderSource(B,J);g.compileShader(B);return B}function r(){t.Oa=!1;var g=t.ga,B=t.eb,J=t.fb,h=t.V;g.uniform1f(t.md,Math.random());t.Aa?B.beginQueryEXT(h,J):g.beginQuery(h,J);g.drawElements(g.POINTS,1,g.UNSIGNED_SHORT,
0);t.Aa?B.endQueryEXT(h):g.endQuery(h);aa.flush();y().then(function(D){D=p.ce*p.Dc*1E3/D;t.Cb=(t.Cb+1)%p.Da;t.cc[t.Cb]=D;if(++t.Ad>p.Da){t.lb.set(t.cc);t.lb.sort(function(M,Y){return M-Y});D=t.lb[Math.floor(p.Da/2)];t.Za=Math.max(t.Za,D);var I=0;for(I=0;I<t.yc&&!(D>t.Za*(1-(p.Ec[I]+p.de*(I>=t.yb?1:-1))));++I)I===t.yc-1&&++I;I!==t.yb&&(console.log("THERMAL THROTTLING LEVEL = "+I.toString()),t.yb=I,t.ca=0===I?0:p.be[I-1],p.Cc&&p.Cc(I))}t.Oa=!0}).catch(function(){t.Oa=!0})}function x(g){var B=t.ga,J=
t.eb,h=t.fb;h=t.Aa?J.Ig(h,J.QUERY_RESULT_AVAILABLE_EXT):B.getQueryParameter(h,B.QUERY_RESULT_AVAILABLE);B=B.getParameter(J.GPU_DISJOINT_EXT);h?g(!B):setTimeout(x.bind(null,g),.1)}function y(){return new Promise(function(g,B){x(function(J){if(J){J=t.ga;var h=t.eb,D=t.fb;J=t.Aa?h.getQueryObjectEXT(D,h.QUERY_RESULT_EXT):J.getQueryParameter(D,J.QUERY_RESULT);g(J)}else B()})})}var m={ud:!0,Vc:[1,200],fc:20,ca:0,ee:!1,Dc:50,ce:240,Fc:3E3,Da:3,Ec:[.2,.35,.5],de:.05,be:[8,20,40],Cc:null},p=null,A=null,w=
0,e=null,F=!1,K=null,H={oa:!1,W:!0,ac:!1,$b:!1,Zb:!1,za:!1},O={Sa:null,timeout:null},t={isEnabled:!1,Oa:!1,ga:null,eb:null,fb:null,V:null,md:null,Aa:!0,yb:0,yc:0,ca:0,bc:0,Ad:0,cc:null,lb:null,Cb:0,Za:0},L=u.bind(null,!0),N=u.bind(null,!1),v={o:function(g){p=Object.assign(m,g);Object.assign(H,{W:!0,oa:!0,za:!1});K=window.requestPostAnimationFrame||window.requestAnimationFrame;if(p.ee){g=document.createElement("canvas");g.setAttribute("width","1");g.setAttribute("height","1");var B={antialias:!1};
g=g.getContext("webgl2",B)||g.getContext("webgl",B);if(B=g.getExtension("EXT_disjoint_timer_query")||g.getExtension("EXT_disjoint_timer_query_webgl2")){t.ga=g;t.eb=B;t.isEnabled=!0;t.Aa=B.beginQueryEXT?!0:!1;var J=q(g,g.VERTEX_SHADER,"attribute vec4 a0;void main(){gl_Position=a0;}"),h=q(g,g.FRAGMENT_SHADER,"precision lowp float;uniform float u37;void main(){vec4 a=u37*vec4(1.,2.,3.,4.);for(int b=0;b<666;b+=1)a=cos(a);gl_FragColor=a;}".replace("666",p.Dc.toString())),D=g.createProgram();g.attachShader(D,
J);g.attachShader(D,h);g.linkProgram(D);J=g.getAttribLocation(D,"a0");t.md=g.getUniformLocation(D,"u37");g.useProgram(D);g.enableVertexAttribArray(J);D=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,D);g.bufferData(g.ARRAY_BUFFER,new Float32Array([.5,.5,0,1]),g.STATIC_DRAW);g.vertexAttribPointer(J,4,g.FLOAT,!1,16,0);D=g.createBuffer();g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,D);g.bufferData(g.ELEMENT_ARRAY_BUFFER,new Uint16Array([0]),g.STATIC_DRAW);g.disable(g.DEPTH_TEST);g.disable(g.DITHER);g.disable(g.STENCIL_TEST);
g.viewport(0,0,1,1);D=t.Aa?B.createQueryEXT():g.createQuery();t.fb=D;t.V=B.TIME_ELAPSED_EXT||g.TIME_ELAPSED;t.yb=0;t.yc=p.Ec.length;t.ca=0;t.bc=-p.Fc;t.cc=new Float32Array(p.Da);t.lb=new Float32Array(p.Da);t.Za=0;t.Cb=0;t.Ad=0;t.Oa=!0}}if(p.ud){g=!1;try{if("undefined"===typeof SharedWorker){var I=URL.createObjectURL(new Blob(["let handler = null;\n      self.addEventListener('message', function(e){\n        if (handler !== null){\n          clearTimeout(handler);\n          handler = null;\n        }\n        switch (e.data) {\n          case 'START':\n          case 'DONE':\n            handler = setTimeout(function(){\n              self.postMessage('TICK');\n            }, "+
p.fc.toString()+");\n            break;\n          case 'STOP':\n            break;\n        };\n      }, false);"],{type:"text/javascript"})),M=new Worker(I);M.addEventListener("message",a);e={Id:M,port:M};H.ac=!0}else{var Y=URL.createObjectURL(new Blob(["let handler = null;\n      onconnect = function(e) {\n        const port = e.ports[0];\n        port.addEventListener('message', function(e) {\n          \n          if (handler !== null){\n            clearTimeout(handler);\n            handler = null;\n          }\n          switch (e.data) {\n            case 'START':\n            case 'DONE':\n              handler = setTimeout(function(){\n                port.postMessage('TICK');\n              }, "+
p.fc.toString()+");\n              break;\n            case 'STOP':\n              break;\n          };\n          \n        });\n        \n        port.start();\n      } // end onconnect()"],{type:"text/javascript"})),oa=new SharedWorker(Y);oa.port.start();oa.port.addEventListener("message",a);e={Id:oa,port:oa.port};H.$b=!0}g=!0}catch(sa){}g&&("onvisibilitychange"in document?document.addEventListener("visibilitychange",l):(window.addEventListener("blur",N),window.addEventListener("focus",L)),H.Zb=
!0)}F="undefined"!==typeof qa},m:function(){k();H.Zb&&("onvisibilitychange"in document?document.removeEventListener("visibilitychange",l):(window.removeEventListener("blur",N),window.removeEventListener("focus",L)),H.Zb=!1);H.$b?(e.port.close(),H.$b=!1):H.ac&&(e.Id.terminate(),H.ac=!1);Object.assign(H,{W:!0,oa:!1,za:!1});A=null},ph:function(){return H.W},update:function(g){Object.assign(p,g)},oc:function(g){H.oa||v.o({});n();H.za=!0;A=g;H.W&&c()},stop:k};return v}(),vb=function(){var a={Ed:4,rb:[1.5,
1.5,2],N:[.1,.1,.1],Md:1,C:-1,K:-1,Pf:2,tf:1,Od:!0,Ee:.8},c=null,d=[],f=[0],k=[.5,.5,1];return{o:function(n){c=Object.assign({},a,n);d.splice(0);n=c.rb[0]*c.N[0];var u=c.rb[1]*c.N[1],l=1/(1+c.rb[2]*c.N[2]),q=c.Md*Math.min(c.C,c.K),r=q/c.C;q/=c.K;var x=.5*c.Ee;x*=x;for(var y=0;y<c.Ed;++y){var m=Math.pow(l,y),p=r*m,A=q*m;m=p*c.tf;var w=p*n,e=A*u;p/=2;A/=2;for(var F=1+(1-p-p)/w,K=1+(1-A-A)/e,H=0;H<K;++H)for(var O=A+H*e,t=O-.5,L=0;L<F;++L){var N=p+L*w,v=N-.5;v*v+t*t>x||d.push([N,O,m])}}c.Od&&d.sort(function(g,
B){var J=g[0]-.5;g=g[1]-.5;var h=B[0]-.5;B=B[1]-.5;return J*J+g*g-(h*h+B*B)})},get:function(n){var u=d.length;if(0===u)return k;for(;n>=f.length;)f.push(0);f[n]>=u&&(f[n]=0);var l=d[Math.floor(f[n])];f[n]=(f[n]+1/c.Pf)%u;return l},reset:function(){for(var n=d.length/f.length,u=0;u<f.length;++u)f[u]=Math.floor(u*n)}}}(),da=function(){function a(x,y,m,p){return m>x?Math.max(0,x+y/2-(m-p/2)):Math.max(0,m+p/2-(x-y/2))}function c(x){return!k.rd(x)}function d(x,y,m){return x.some(function(p,A){if(A===y)return!1;
A=x[y];return A.pa>p.pa||3>p.pa||a(A.x,A.ja,p.x,p.ja)<k.ec*A.ja?!1:a(A.y,A.ja*m,p.y,p.ja*m)>k.ec*A.ja*m})}var f={L:1,ec:.3,Pd:.3,rd:null,ff:!0},k=null,n=0,u=null,l=!1,q=0,r=0;return{o:function(x){k=Object.assign({},f,x);u=[0]},yd:function(){return 1!==k.L},hd:function(){return n},xd:function(){return l},na:function(){return k.L},ah:function(){return u},jf:function(x){return u.includes(x)},update:function(x,y){var m=u;if(m.length>x)m.splice(0,m.length-x);else for(;m.length<x;)m.push(0);if(1!==k.L)if(y.every(c)){y=
q;for(var p=0;p<x;++p)m[p]=y,y=(y+1)%k.L;q=y}else{p=Math.round(k.Pd*x);p=Math.max(1,p);for(var A=q,w=0,e=0;w<x;++w){if(c(y[A])&&++e>p){do++A===k.L&&(A=0);while(c(y[A]))}m[w]=A;A=(A+1)%k.L}q=A}},zb:function(x){n=u[x];r=(.5+n)/k.L;l=u.lastIndexOf(n)===x;return n},Nf:function(x,y){return 1===k.L?!1:d(x,n,y)},Xd:function(x){k.ff&&1===k.L||C.G(x,r)},De:function(x){for(var y=new Float32Array(x.length*k.L),m=0,p;m<k.L;++m)for(p=0;p<x.length;++p)y[m*x.length+p]=x[p];return y},Ob:function(x){for(var y=[],
m=0;m<k.L;++m)y.push(JSON.parse(JSON.stringify(x)));return y}}}(),ea={neuralNetworkPath:"NN_DEFAULT.json",ba:0,Cf:{threshold:1.2,nScaleLevels:2,scale0Factor:.8,nDetectsPerLoopRange:[2,12],overlapFactors:[2,2,3],scanCenterFirst:!0,nDetectsPerLoop:-1,multiDetectionThresholdFactors:[.5,.6],translationScalingFactors:[.3,.3,1],isCleanGLStateAtEachIteration:!0,animateProcessOrder:"DSAR"},Sf:50,qf:.4,pf:8,rf:.3,Of:{translationFactorRange:[.0015,.005],rotationFactorRange:[.003,
.02],qualityFactorRange:[.9,.98],alphaRange:[.05,1],followZRotAlphaFactor:.8},Pa:[.65,1,.262],ge:.2,ie:2,he:.1,sf:8,Dd:1,He:Za.nb.bind(null,.3,.7),Xf:20,Ud:3},pa={facingMode:"user",idealWidth:800,idealHeight:600,minWidth:480,maxWidth:1920,minHeight:480,maxHeight:1920,rotate:0,flipX:!1},ia={ic:-3,kf:-1,error:-2,ready:1,play:2,pause:3},na=ia.ic,G=null,bc={hb:!1,tc:null,element:null,M:null,D:[0,0],v:[.5,0,0,.5],tb:0,Ja:null,gb:!1},P=null,cc={Ia:null,Eb:null,antialias:!0,Gc:"./",Ea:null,ea:null,ba:ea.ba,
Hd:ea.ba,ib:!1,va:!0},Oa=null,ba=null,ra=null,Pa=1,Na={pc:-1,Jb:-1},Z=null,dc={C:0,K:0,D:[0,0],Na:null},U={sa:null,buffer:null,N:null,Pa:null,Y:ea.Dd,Nd:1,La:null},Sa=null,Fa=null,hb=[],ib=[],qb={VERSION:"3.0.6",init:function(a){function c(){na!==ia.error&&2===++f&&(Ja(),xb(),Ia(),P.Ia&&(na=ia.ready,P.Ia(!1,{GL:b,canvasElement:P.ea,videoTexture:G.M.get(),videoTransformMat2:G.v,maxFacesDetected:da.na(),videoElement:G.element}),gb()),fb())}if(na!==ia.ic)return a.callbackReady&&a.callbackReady("ALREADY_INITIALIZED"),
!1;na=ia.kf;G=Object.assign({},bc);P=Object.assign({},cc);Z=Object.assign({},dc);U.Pa=ea.Pa.slice(0);"undefined"!==typeof a.antialias&&(P.antialias=a.antialias);a.callbackReady&&(P.Ia=a.callbackReady);a.callbackTrack&&(P.Eb=a.callbackTrack);a.nExpressions&&(U.Y=a.nExpressions);a.expressionsEasings&&(U.La=a.expressionsEasings);"undefined"!==typeof a.animateDelay&&(P.ba=a.animateDelay);"undefined"!==typeof a.NNCPath&&(P.Gc=a.NNCPath);"undefined"!==typeof a.NNC&&(P.Ea=a.NNC);"undefined"!==typeof a.followZRot&&
(P.va=a.followZRot?!0:!1);if(!a.canvasId&&!a.canvas)return Ha("NO_CANVASID"),!1;P.ea=a.canvas?a.canvas:document.getElementById(a.canvasId);if(!P.ea)return Ha("INVALID_CANVASID"),!1;Z.C=P.ea.width;Z.K=P.ea.height;if(!Z.C||!Z.K)return Ha("INVALID_CANVASDIMENSIONS"),!1;ba=Object.create(ea.Cf);a.scanSettings&&Object.assign(ba,a.scanSettings);var d=1;"undefined"!==typeof a.maxFacesDetected&&(d=Math.max(1,a.maxFacesDetected));if(d>ea.pf)return Ha("MAXFACES_TOOHIGH"),!1;da.o({L:d,ec:ea.qf,Pd:ea.rf,rd:function(k){return k.detected>
ba.multiDetectionThresholdFactors[1]*ba.threshold}});for(d=0;d<da.na();++d)hb.push(new Float32Array(ea.sf)),ib.push(0);Ma.o({ud:a.isKeepRunningOnWinFocusLost||!1,ca:P.ba});qa.o({hc:0,n:ba.nDetectsPerLoopRange[1]-ba.nDetectsPerLoopRange[0]+1,Bd:ba.nDetectsPerLoopRange[0]});-1!==ba.nDetectsPerLoop?qa.qc(ba.nDetectsPerLoop):qa.Ac();U.N=ba.translationScalingFactors.slice(0);ra=Object.create(ea.Of);a.stabilizationSettings&&Object.assign(ra,a.stabilizationSettings);var f=0;a.videoSettings&&a.videoSettings.videoElement?
ab(a.videoSettings.videoElement,c):(a.videoSettings&&Object.assign(pa,a.videoSettings),zb(a.onWebcamAsk,a.onWebcamGet,function(k){ab(k,c)}));Ob(function(k){if(!Pb())return!1;Oa=new Fb({mb:k.layers,nc:"gpuRawAvg",kc:Qb});C.Kc([{id:"s54",name:"_",ta:"attribute vec2 a0;uniform mat2 u38;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=vec2(.5,.5)+u38*a0;}",Ta:["a0"],Ga:[2],h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1","u38"],precision:"lowp"},
{id:"s55",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",ta:"attribute vec2 a0;uniform sampler2D u39;uniform mat2 u38;uniform vec2 u40;uniform float u41,u42,u43;varying vec2 vv0;void main(){vec4 a=texture2D(u39,vec2(.17,u41));vec2 f=a.gb,g=a.a*u40,b=a0;b.x*=u43;float c=cos(u42),d=sin(u42);vec2 h=mat2(c,d,-d,c)*b,i=f+h*.5*g,j=i-.5;vv0=vec2(.5,.5)+2.*u38*j,gl_Position=vec4(a0,0.,1.);}",Ta:["a0"],Ga:[2],i:"u1 u39 u40 u41 u42 u43 u38".split(" "),precision:"lowp"},
{id:"s56",name:"_",h:"uniform sampler2D u44,u39;uniform vec3 u45,u46;uniform float u47,u48,u41,u49,u42,u50;const vec4 e=vec4(.25,.25,.25,.25);void main(){vec4 d=texture2D(u44,vec2(.625,.625)),f=texture2D(u44,vec2(.875,.625)),a=texture2D(u39,vec2(.17,u41));float g=dot(d-f,e);bool h=g>u48;a.r<-.5?a.r+=1.:h?a.r=2.:a.r>u47?a.r=0.:a.r>1.9?a.r+=1.:0.,a.r=mix(-2.,a.r,u49);if(a.r<.9)a=vec4(1.,u45);else{a.r*=step(1.9,a.r);float i=dot(e,texture2D(u44,vec2(.875,.875))),j=dot(e,texture2D(u44,vec2(.125,.625))),k=dot(e,texture2D(u44,vec2(.375,.625))),b=cos(u42),c=sin(u42);vec2 l=mat2(b,c*u50,-c/u50,b)*vec2(i,j);a.gba+=vec3(l,k)*u46*a.a;}gl_FragColor=a;}",
ta:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",i:"u44 u39 u45 u47 u46 u49 u42 u50 u48 u41".split(" ")},{id:"s57",name:"_",ta:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",h:"uniform sampler2D u44;uniform float u49;const vec4 e=vec4(.25,.25,.25,.25);const vec3 f=vec3(.5,.5,.5);void main(){float a=dot(e,texture2D(u44,vec2(.125,.875))),b=dot(e,texture2D(u44,vec2(.375,.875))),c=dot(e,texture2D(u44,vec2(.625,.875))),d=dot(e,texture2D(u44,vec2(.625,.625)));vec3 g=vec3(a,b,c)*.5+f;gl_FragColor=vec4(g,d*u49);}",
i:["u44","u49"]},{id:"s58",name:"_",ta:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",h:"uniform sampler2D u44;const vec4 e=vec4(.25,.25,.25,.25);void main(){float a=dot(e,texture2D(u44,vec2(.375,.375))),b=dot(e,texture2D(u44,vec2(.625,.375))),c=dot(e,texture2D(u44,vec2(.875,.375))),d=dot(e,texture2D(u44,vec2(.125,.125)));gl_FragColor=vec4(a,b,c,d);}",i:["u44"]},{id:"s53",name:"_",h:"uniform sampler2D u39;uniform vec2 u51;uniform float u52;varying vec2 vv0;void main(){float f=step(.5,mod(gl_FragCoord.y+1.5,2.)),c=step(.33,vv0.x);vec4 a=texture2D(u39,vv0+u51);a.a=mix(a.a*u52,a.a,c);vec4 d=floor(255.*a),g=255.*(255.*a-d),b=mix(d,g,f)/255.;b.x=mix(step(a.x,1.5),b.x,c),gl_FragColor=b;}",
i:["u39","u52","u51"]}]);ub();U.buffer=new Uint8Array(8*ea.Ud*da.na());Sa=da.Ob({Va:0,x:0,y:0,ja:1,rx:0,ry:0,Qa:0,cd:new Float32Array(U.Y),pa:0});Fa=da.Ob({detected:0,x:0,y:0,s:1,xRaw:0,yRaw:0,sRaw:1,rx:0,ry:0,rz:0,expressions:new Float32Array(U.Y)});da.Ob({dx:0,dy:0,Nb:0,Kb:0,Lb:0,Mb:0});kb();jb();c()});return!0},destroy:function(){Ma.m();return new Promise(function(a){qb.toggle_pause(!0,!0).finally(function(){Oa&&Oa.m();Qa.m();Oa=Fa=Sa=null;hb.splice(0);ib.splice(0);Z.Na=null;U.sa=null;G.M=null;
na=ia.ic;a()}).catch(function(){})})},toggle_videoStream:function(a){return G.gb||!G.element?Promise.resolve():V.Zd(G.element,a,G.Ja)},toggle_pause:function(a,c){if(!Ya())return Promise.reject("NOT_READY");c=c?qb.toggle_videoStream(!a):Promise.resolve();a?sb():c.then(function(){fb()});return c},update_videoSettings:function(a){sb();return new Promise(function(c,d){V.Zd(G.element,!1,G.Ja).then(function(){Object.assign(pa,a);zb(null,null,function(f){ab(f,function(){Ja();Ia();fb();c()})})}).catch(d)})},
toggle_slow:function(a){Ya()&&na===ia.play&&(a&&!P.ib?(P.Hd=P.ba,ba.nDetectsPerLoop=1,this.set_animateDelay(ea.Zf),P.ib=!0):!a&&P.ib&&(ba.nDetectsPerLoop=-1,this.set_animateDelay(P.Hd),P.ib=!1))},set_animateDelay:function(a){P.ba=a;Ma.update({ca:P.ba})},resize:function(){if(!Ya())return!1;var a=P.ea.width,c=P.ea.height;if(!lb()&&a===Z.C&&c===Z.K)return!1;Z.C=a;Z.K=c;C.P();kb();jb();Ja();Ia();return!0},set_inputTexture:function(a,c,d){G.D[0]=c;G.D[1]=d;G.M=X.instance({width:c,height:d,Vb:a});G.hb=
!0;Ja();gb();Ia()},reset_GLState:function(){gb();Z.Na.remove();U.sa.remove();ub()},render_video:function(){va.O();C.set("s54");b.viewport(0,0,Z.C,Z.K);G.M.g(0);T.l(!0,!0)},reset_inputTexture:function(){G.hb=!1;G.M=G.tc;lb();Ja();Ia()},get_videoDevices:function(a){return V.Xe(a)},set_scanSettings:function(a){Object.assign(ba,a);-1!==ba.nDetectsPerLoop?qa.qc(ba.nDetectsPerLoop):qa.Ac();kb();jb()},set_stabilizationSettings:function(a){Object.assign(ra,a)},set_videoOrientation:function(a,c){Ya()&&(pa.flipX=
c,pa.rotate=a,Ja(),Ia())},update_videoElement:function(a,c){ab(a?a:G.element,function(){xb();Ja();Ia();c&&c()})},create_new:function(){return window.JEELIZFACEFILTERGEN()}};return qb};window.JEELIZFACEFILTER=window.JEELIZFACEFILTERGEN();
if(typeof(module)!=='undefined'){module.exports=window.JEELIZFACEFILTER;}
window.JEELIZFACEFILTER.FAKEDOM=FAKEDOM;